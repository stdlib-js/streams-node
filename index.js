// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("stream"),require("buffer"),require("process")):"function"==typeof define&&define.amd?define(["stream","buffer","process"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).streams=t(e.require$$0$3,e.require$$0$1,e.require$$0$2)}(this,(function(e,t,r){"use strict";var n="function"==typeof Object.defineProperty?Object.defineProperty:null;var i,o=Object.defineProperty,a=Object.prototype,s=a.toString,u=a.__defineGetter__,l=a.__defineSetter__,c=a.__lookupGetter__,f=a.__lookupSetter__;i=function(){try{return n({},"x",{}),!0}catch(e){return!1}}()?o:function(e,t,r){var n,i,o,d;if("object"!=typeof e||null===e||"[object Array]"===s.call(e))throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if("object"!=typeof r||null===r||"[object Array]"===s.call(r))throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if((i="value"in r)&&(c.call(e,t)||f.call(e,t)?(n=e.__proto__,e.__proto__=a,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,d="set"in r,i&&(o||d))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&u&&u.call(e,t,r.get),d&&l&&l.call(e,t,r.set),e};var d=i;function p(e,t,r){d(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}function h(e,t,r){d(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}function g(e){var t=e.default;if("function"==typeof t){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var b=/./;function m(e){return"boolean"==typeof e}var y="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");function v(){return y&&"symbol"==typeof Symbol.toStringTag}var w=Object.prototype.toString;var j=Object.prototype.hasOwnProperty;function O(e,t){return null!=e&&j.call(e,t)}var _="function"==typeof Symbol?Symbol.toStringTag:"";var M=v()?function(e){var t,r,n;if(null==e)return w.call(e);r=e[_],t=O(e,_);try{e[_]=void 0}catch(t){return w.call(e)}return n=w.call(e),t?e[_]=r:delete e[_],n}:function(e){return w.call(e)},E=Boolean.prototype.toString;var S=v();function T(e){return"object"==typeof e&&(e instanceof Boolean||(S?function(e){try{return E.call(e),!0}catch(e){return!1}}(e):"[object Boolean]"===M(e)))}function k(e){return m(e)||T(e)}function A(){return new Function("return this;")()}h(k,"isPrimitive",m),h(k,"isObject",T);var x="object"==typeof self?self:null,V="object"==typeof window?window:null,W="object"==typeof global?global:null;function I(e){if(arguments.length){if(!m(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return A()}if(x)return x;if(V)return V;if(W)return W;throw new Error("unexpected error. Unable to resolve global object.")}var C=I(),N=C.document&&C.document.childNodes,z=Int8Array;function F(){return/^\s*function\s*([^(]*)/i}var H,J=/^\s*function\s*([^(]*)/i;h(F,"REGEXP",J),H=Array.isArray?Array.isArray:function(e){return"[object Array]"===M(e)};var R=H;function U(e){return null!==e&&"object"==typeof e}var P=function(e){if("function"!=typeof e)throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return function(t){var r,n;if(!R(t))return!1;if(0===(r=t.length))return!1;for(n=0;n<r;n++)if(!1===e(t[n]))return!1;return!0}}(U);function B(e){return U(e)&&(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e))}function $(e){var t,r,n;if(("Object"===(r=M(e).slice(8,-1))||"Error"===r)&&e.constructor){if("string"==typeof(n=e.constructor).name)return n.name;if(t=J.exec(n.toString()))return t[1]}return B(e)?"Buffer":r}h(U,"isObjectLikeArray",P);var L="function"==typeof b||"object"==typeof z||"function"==typeof N?function(e){return $(e).toLowerCase()}:function(e){var t;return null===e?"null":"object"===(t=typeof e)?$(e).toLowerCase():t};function G(e){return"function"===L(e)}function q(e){return"number"==typeof e}var X=Number,D=X.prototype.toString;var Z=v();function Y(e){return"object"==typeof e&&(e instanceof X||(Z?function(e){try{return D.call(e),!0}catch(e){return!1}}(e):"[object Number]"===M(e)))}function K(e){return q(e)||Y(e)}h(K,"isPrimitive",q),h(K,"isObject",Y);var Q=Number.POSITIVE_INFINITY,ee=X.NEGATIVE_INFINITY,te=Math.floor;function re(e){return te(e)===e}function ne(e){return e<Q&&e>ee&&re(e)}function ie(e){return q(e)&&ne(e)}function oe(e){return Y(e)&&ne(e.valueOf())}function ae(e){return ie(e)||oe(e)}function se(e){return ie(e)&&e>=0}function ue(e){return oe(e)&&e.valueOf()>=0}function le(e){return se(e)||ue(e)}h(ae,"isPrimitive",ie),h(ae,"isObject",oe),h(le,"isPrimitive",se),h(le,"isObject",ue);var ce,fe=Object.getPrototypeOf;ce=G(Object.getPrototypeOf)?fe:function(e){var t=function(e){return e.__proto__}(e);return t||null===t?t:"[object Function]"===M(e.constructor)?e.constructor.prototype:e instanceof Object?Object.prototype:null};var de=ce;function pe(e){return null==e?null:(e=Object(e),de(e))}function he(e){if("object"!=typeof e||null===e)return!1;if(e instanceof Error)return!0;for(;e;){if("[object Error]"===M(e))return!0;e=pe(e)}return!1}function ge(e){return"string"==typeof e}var be=String.prototype.valueOf;var me=v();function ye(e){return"object"==typeof e&&(e instanceof String||(me?function(e){try{return be.call(e),!0}catch(e){return!1}}(e):"[object String]"===M(e)))}function ve(e){return ge(e)||ye(e)}function we(){return/^\/((?:\\\/|[^\/])+)\/([imgy]*)$/}function je(e){return"number"==typeof e}function Oe(e){var t,r="";for(t=0;t<e;t++)r+="0";return r}function _e(e,t,r){var n=!1,i=t-e.length;return i<0||(function(e){return"-"===e[0]}(e)&&(n=!0,e=e.substr(1)),e=r?e+Oe(i):Oe(i)+e,n&&(e="-"+e)),e}h(ve,"isPrimitive",ge),h(ve,"isObject",ye),h(we,"REGEXP",/^\/((?:\\\/|[^\/])+)\/([imgy]*)$/);var Me=String.prototype.toLowerCase,Ee=String.prototype.toUpperCase;function Se(e){var t,r,n;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(r=e.arg,n=parseInt(r,10),!isFinite(n)){if(!je(r))throw new Error("invalid integer. Value: "+r);n=0}return n<0&&("u"===e.specifier||10!==t)&&(n=4294967295+n+1),n<0?(r=(-n).toString(t),e.precision&&(r=_e(r,e.precision,e.padRight)),r="-"+r):(r=n.toString(t),n||e.precision?e.precision&&(r=_e(r,e.precision,e.padRight)):r="",e.sign&&(r=e.sign+r)),16===t&&(e.alternate&&(r="0x"+r),r=e.specifier===Ee.call(e.specifier)?Ee.call(r):Me.call(r)),8===t&&e.alternate&&"0"!==r.charAt(0)&&(r="0"+r),r}function Te(e){return"string"==typeof e}var ke=Math.abs,Ae=String.prototype.toLowerCase,xe=String.prototype.toUpperCase,Ve=String.prototype.replace,We=/e\+(\d)$/,Ie=/e-(\d)$/,Ce=/^(\d+)$/,Ne=/^(\d+)e/,ze=/\.0$/,Fe=/\.0*e/,He=/(\..*[^0])0*e/;function Je(e){var t,r,n=parseFloat(e.arg);if(!isFinite(n)){if(!je(e.arg))throw new Error("invalid floating-point number. Value: "+r);n=e.arg}switch(e.specifier){case"e":case"E":r=n.toExponential(e.precision);break;case"f":case"F":r=n.toFixed(e.precision);break;case"g":case"G":ke(n)<1e-4?((t=e.precision)>0&&(t-=1),r=n.toExponential(t)):r=n.toPrecision(e.precision),e.alternate||(r=Ve.call(r,He,"$1e"),r=Ve.call(r,Fe,"e"),r=Ve.call(r,ze,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return r=Ve.call(r,We,"e+0$1"),r=Ve.call(r,Ie,"e-0$1"),e.alternate&&(r=Ve.call(r,Ce,"$1."),r=Ve.call(r,Ne,"$1.e")),n>=0&&e.sign&&(r=e.sign+r),r=e.specifier===xe.call(e.specifier)?xe.call(r):Ae.call(r)}function Re(e){var t,r="";for(t=0;t<e;t++)r+=" ";return r}function Ue(e,t,r){var n=t-e.length;return n<0?e:e=r?e+Re(n):Re(n)+e}var Pe=String.fromCharCode,Be=isNaN,$e=Array.isArray;function Le(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function Ge(e){var t,r,n,i,o,a,s,u,l;if(!$e(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(a="",s=1,u=0;u<e.length;u++)if(Te(n=e[u]))a+=n;else{if(t=void 0!==n.precision,!(n=Le(n)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+u+"`. Value: `"+n+"`.");for(n.mapping&&(s=n.mapping),r=n.flags,l=0;l<r.length;l++)switch(i=r.charAt(l)){case" ":n.sign=" ";break;case"+":n.sign="+";break;case"-":n.padRight=!0,n.padZeros=!1;break;case"0":n.padZeros=r.indexOf("-")<0;break;case"#":n.alternate=!0;break;default:throw new Error("invalid flag: "+i)}if("*"===n.width){if(n.width=parseInt(arguments[s],10),s+=1,Be(n.width))throw new TypeError("the argument for * width at position "+s+" is not a number. Value: `"+n.width+"`.");n.width<0&&(n.padRight=!0,n.width=-n.width)}if(t&&"*"===n.precision){if(n.precision=parseInt(arguments[s],10),s+=1,Be(n.precision))throw new TypeError("the argument for * precision at position "+s+" is not a number. Value: `"+n.precision+"`.");n.precision<0&&(n.precision=1,t=!1)}switch(n.arg=arguments[s],n.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(n.padZeros=!1),n.arg=Se(n);break;case"s":n.maxWidth=t?n.precision:-1;break;case"c":if(!Be(n.arg)){if((o=parseInt(n.arg,10))<0||o>127)throw new Error("invalid character code. Value: "+n.arg);n.arg=Be(o)?String(n.arg):Pe(o)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(n.precision=6),n.arg=Je(n);break;default:throw new Error("invalid specifier: "+n.specifier)}n.maxWidth>=0&&n.arg.length>n.maxWidth&&(n.arg=n.arg.substring(0,n.maxWidth)),n.padZeros?n.arg=_e(n.arg,n.width||n.precision,n.padRight):n.width&&(n.arg=Ue(n.arg,n.width,n.padRight)),a+=n.arg||"",s+=1}return a}var qe=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function Xe(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function De(e){var t,r,n,i;for(r=[],i=0,n=qe.exec(e);n;)(t=e.slice(i,qe.lastIndex-n[0].length)).length&&r.push(t),r.push(Xe(n)),i=qe.lastIndex,n=qe.exec(e);return(t=e.slice(i)).length&&r.push(t),r}function Ze(e){return"string"==typeof e}function Ye(e){var t,r,n;if(!Ze(e))throw new TypeError(Ye("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=De(e),(r=new Array(arguments.length))[0]=t,n=1;n<r.length;n++)r[n]=arguments[n];return Ge.apply(null,r)}function Ke(e){return e!=e}function Qe(e){return q(e)&&Ke(e)}function et(e){return Y(e)&&Ke(e.valueOf())}function tt(e){return Qe(e)||et(e)}h(tt,"isPrimitive",Qe),h(tt,"isObject",et);function rt(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&re(e.length)&&e.length>=0&&e.length<=9007199254740991}function nt(e,t,r){var n,i;if(!rt(e)&&!ge(e))throw new TypeError("invalid argument. First argument must be an array-like object. Value: `"+e+"`.");if(0===(n=e.length))return-1;if(3===arguments.length){if(!ie(r))throw new TypeError("invalid argument. `fromIndex` must be an integer. Value: `"+r+"`.");if(r>=0){if(r>=n)return-1;i=r}else(i=n+r)<0&&(i=0)}else i=0;if(tt(t)){for(;i<n;i++)if(tt(e[i]))return i}else for(;i<n;i++)if(e[i]===t)return i;return-1}function it(e){return Object.keys(Object(e))}var ot,at=void 0!==Object.keys;function st(e){return"[object Arguments]"===M(e)}ot=function(){return st(arguments)}();var ut=ot,lt=Object.prototype.propertyIsEnumerable;var ct=!lt.call("beep","0");function ft(e,t){var r;return null!=e&&(!(r=lt.call(e,t))&&ct&&ve(e)?!Qe(t=+t)&&ie(t)&&t>=0&&t<e.length:r)}var dt,pt=4294967295;dt=ut?st:function(e){return null!==e&&"object"==typeof e&&!R(e)&&"number"==typeof e.length&&re(e.length)&&e.length>=0&&e.length<=pt&&O(e,"callee")&&!ft(e,"callee")};var ht=dt,gt=Array.prototype.slice;var bt=ft((function(){}),"prototype"),mt=!ft({toString:null},"toString");function yt(e){return e.constructor&&e.constructor.prototype===e}var vt=["console","external","frame","frameElement","frames","innerHeight","innerWidth","outerHeight","outerWidth","pageXOffset","pageYOffset","parent","scrollLeft","scrollTop","scrollX","scrollY","self","webkitIndexedDB","webkitStorageInfo","window"],wt="undefined"==typeof window?void 0:window;var jt=function(){var e;if("undefined"===L(wt))return!1;for(e in wt)try{-1===nt(vt,e)&&O(wt,e)&&null!==wt[e]&&"object"===L(wt[e])&&yt(wt[e])}catch(e){return!0}return!1}(),Ot="undefined"!=typeof window;var _t,Mt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];_t=at?function(){return 2!==(it(arguments)||"").length}(1,2)?function(e){return ht(e)?it(gt.call(e)):it(e)}:it:function(e){var t,r,n,i,o,a,s;if(i=[],ht(e)){for(s=0;s<e.length;s++)i.push(s.toString());return i}if("string"==typeof e){if(e.length>0&&!O(e,"0"))for(s=0;s<e.length;s++)i.push(s.toString())}else{if(!1==(n="function"==typeof e)&&!U(e))return i;r=bt&&n}for(o in e)r&&"prototype"===o||!O(e,o)||i.push(String(o));if(mt)for(t=function(e){if(!1===Ot&&!jt)return yt(e);try{return yt(e)}catch(e){return!1}}(e),s=0;s<Mt.length;s++)a=Mt[s],t&&"constructor"===a||!O(e,a)||i.push(String(a));return i};var Et,St=_t,Tt=void 0!==Object.getOwnPropertyNames,kt=Object.getOwnPropertyNames;Et=Tt?function(e){return kt(Object(e))}:function(e){return St(Object(e))};var At,xt=Et,Vt=void 0!==Object.getOwnPropertyDescriptor,Wt=Object.getOwnPropertyDescriptor;At=Vt?function(e,t){var r;return null==e||void 0===(r=Wt(e,t))?null:r}:function(e,t){return O(e,t)?{configurable:!0,enumerable:!0,writable:!0,value:e[t]}:null};var It=At,Ct="function"==typeof Buffer?Buffer:null;var Nt,zt=t.Buffer;Nt=function(){var e,t;if("function"!=typeof Ct)return!1;try{e=B(t="function"==typeof Ct.from?Ct.from([1,2,3,4]):new Ct([1,2,3,4]))&&1===t[0]&&2===t[1]&&3===t[2]&&4===t[3]}catch(t){e=!1}return e}()?zt:function(){throw new Error("not implemented")};var Ft=Nt;var Ht=G(Ft.from)?function(e){if(!B(e))throw new TypeError("invalid argument. Must provide a Buffer. Value: `"+e+"`");return Ft.from(e)}:function(e){if(!B(e))throw new TypeError("invalid argument. Must provide a Buffer. Value: `"+e+"`");return new Ft(e)},Jt="function"==typeof Int8Array;var Rt="function"==typeof Int8Array?Int8Array:null;var Ut,Pt="function"==typeof Int8Array?Int8Array:void 0;Ut=function(){var e,t,r;if("function"!=typeof Rt)return!1;try{t=new Rt([1,3.14,-3.14,128]),r=t,e=(Jt&&r instanceof Int8Array||"[object Int8Array]"===M(r))&&1===t[0]&&3===t[1]&&-3===t[2]&&-128===t[3]}catch(t){e=!1}return e}()?Pt:function(){throw new Error("not implemented")};var Bt=Ut,$t="function"==typeof Uint8Array;function Lt(e){return $t&&e instanceof Uint8Array||"[object Uint8Array]"===M(e)}var Gt="function"==typeof Uint8Array?Uint8Array:null;var qt,Xt="function"==typeof Uint8Array?Uint8Array:void 0;qt=function(){var e,t;if("function"!=typeof Gt)return!1;try{e=Lt(t=new Gt(t=[1,3.14,-3.14,256,257]))&&1===t[0]&&3===t[1]&&253===t[2]&&0===t[3]&&1===t[4]}catch(t){e=!1}return e}()?Xt:function(){throw new Error("not implemented")};var Dt=qt,Zt="function"==typeof Uint8ClampedArray;var Yt="function"==typeof Uint8ClampedArray?Uint8ClampedArray:null;var Kt,Qt="function"==typeof Uint8ClampedArray?Uint8ClampedArray:void 0;Kt=function(){var e,t,r;if("function"!=typeof Yt)return!1;try{t=new Yt([-1,0,1,3.14,4.99,255,256]),r=t,e=(Zt&&r instanceof Uint8ClampedArray||"[object Uint8ClampedArray]"===M(r))&&0===t[0]&&0===t[1]&&1===t[2]&&3===t[3]&&5===t[4]&&255===t[5]&&255===t[6]}catch(t){e=!1}return e}()?Qt:function(){throw new Error("not implemented")};var er=Kt,tr="function"==typeof Int16Array;var rr="function"==typeof Int16Array?Int16Array:null;var nr,ir="function"==typeof Int16Array?Int16Array:void 0;nr=function(){var e,t,r;if("function"!=typeof rr)return!1;try{t=new rr([1,3.14,-3.14,32768]),r=t,e=(tr&&r instanceof Int16Array||"[object Int16Array]"===M(r))&&1===t[0]&&3===t[1]&&-3===t[2]&&-32768===t[3]}catch(t){e=!1}return e}()?ir:function(){throw new Error("not implemented")};var or=nr,ar="function"==typeof Uint16Array;var sr="function"==typeof Uint16Array?Uint16Array:null;var ur,lr="function"==typeof Uint16Array?Uint16Array:void 0;ur=function(){var e,t,r;if("function"!=typeof sr)return!1;try{t=new sr(t=[1,3.14,-3.14,65536,65537]),r=t,e=(ar&&r instanceof Uint16Array||"[object Uint16Array]"===M(r))&&1===t[0]&&3===t[1]&&65533===t[2]&&0===t[3]&&1===t[4]}catch(t){e=!1}return e}()?lr:function(){throw new Error("not implemented")};var cr=ur,fr="function"==typeof Int32Array;var dr="function"==typeof Int32Array?Int32Array:null;var pr,hr="function"==typeof Int32Array?Int32Array:void 0;pr=function(){var e,t,r;if("function"!=typeof dr)return!1;try{t=new dr([1,3.14,-3.14,2147483648]),r=t,e=(fr&&r instanceof Int32Array||"[object Int32Array]"===M(r))&&1===t[0]&&3===t[1]&&-3===t[2]&&-2147483648===t[3]}catch(t){e=!1}return e}()?hr:function(){throw new Error("not implemented")};var gr=pr,br="function"==typeof Uint32Array;var mr="function"==typeof Uint32Array?Uint32Array:null;var yr,vr="function"==typeof Uint32Array?Uint32Array:void 0;yr=function(){var e,t,r;if("function"!=typeof mr)return!1;try{t=new mr(t=[1,3.14,-3.14,4294967296,4294967297]),r=t,e=(br&&r instanceof Uint32Array||"[object Uint32Array]"===M(r))&&1===t[0]&&3===t[1]&&4294967293===t[2]&&0===t[3]&&1===t[4]}catch(t){e=!1}return e}()?vr:function(){throw new Error("not implemented")};var wr=yr,jr="function"==typeof Float32Array;var Or="function"==typeof Float32Array?Float32Array:null;var _r,Mr="function"==typeof Float32Array?Float32Array:void 0;_r=function(){var e,t,r;if("function"!=typeof Or)return!1;try{t=new Or([1,3.14,-3.14,5e40]),r=t,e=(jr&&r instanceof Float32Array||"[object Float32Array]"===M(r))&&1===t[0]&&3.140000104904175===t[1]&&-3.140000104904175===t[2]&&t[3]===Q}catch(t){e=!1}return e}()?Mr:function(){throw new Error("not implemented")};var Er=_r,Sr="function"==typeof Float64Array;var Tr="function"==typeof Float64Array?Float64Array:null;var kr,Ar="function"==typeof Float64Array?Float64Array:void 0;kr=function(){var e,t,r;if("function"!=typeof Tr)return!1;try{t=new Tr([1,3.14,-3.14,NaN]),r=t,e=(Sr&&r instanceof Float64Array||"[object Float64Array]"===M(r))&&1===t[0]&&3.14===t[1]&&-3.14===t[2]&&t[3]!=t[3]}catch(t){e=!1}return e}()?Ar:function(){throw new Error("not implemented")};var xr=kr;function Vr(e){return new Bt(e)}function Wr(e){return new Dt(e)}function Ir(e){return new er(e)}function Cr(e){return new or(e)}function Nr(e){return new cr(e)}function zr(e){return new gr(e)}function Fr(e){return new wr(e)}function Hr(e){return new Er(e)}function Jr(e){return new xr(e)}var Rr={int8array:Vr,uint8array:Wr,uint8clampedarray:Ir,int16array:Cr,uint16array:Nr,int32array:zr,uint32array:Fr,float32array:Hr,float64array:Jr};function Ur(e,t,r,n,i){var o,a,s,u,l,c,f,p,h,g;if(i-=1,"object"!=typeof e||null===e)return e;if(B(e))return Ht(e);if(he(e))return function(e){var t,r,n,i,o,a,s=[],u=[];for(o=new e.constructor(e.message),s.push(e),u.push(o),e.stack&&(o.stack=e.stack),e.code&&(o.code=e.code),e.errno&&(o.errno=e.errno),e.syscall&&(o.syscall=e.syscall),t=St(e),a=0;a<t.length;a++)i=t[a],O(r=It(e,i),"value")&&(n=R(e[i])?[]:{},r.value=Ur(e[i],n,s,u,-1)),d(o,i,r);return o}(e);if("date"===(s=L(e)))return new Date(+e);if("regexp"===s)return function(e){if(!ge(e))throw new TypeError(Ye("invalid argument. Must provide a regular expression string. Value: `%s`.",e));return(e=/^\/((?:\\\/|[^\/])+)\/([imgy]*)$/.exec(e))?new RegExp(e[1],e[2]):null}(e.toString());if("set"===s)return new Set(e);if("map"===s)return new Map(e);if("string"===s||"boolean"===s||"number"===s)return e.valueOf();if(l=Rr[s])return l(e);if("array"!==s&&"object"!==s)return"function"==typeof Object.freeze?function(e){var t,r,n,i,o,a,s,u;for(t=[],i=[],s=Object.create(pe(e)),t.push(e),i.push(s),r=xt(e),u=0;u<r.length;u++)n=r[u],O(o=It(e,n),"value")&&(a=R(e[n])?[]:{},o.value=Ur(e[n],a,t,i,-1)),d(s,n,o);return Object.isExtensible(e)||Object.preventExtensions(s),Object.isSealed(e)&&Object.seal(s),Object.isFrozen(e)&&Object.freeze(s),s}(e):{};if(a=St(e),i>0)for(o=s,g=0;g<a.length;g++)p=e[c=a[g]],s=L(p),"object"!=typeof p||null===p||"array"!==s&&"object"!==s||B(p)?"object"===o?(O(u=It(e,c),"value")&&(u.value=Ur(p)),d(t,c,u)):t[c]=Ur(p):-1===(h=nt(r,p))?(f=R(p)?new Array(p.length):{},r.push(p),n.push(f),"array"===o?t[c]=Ur(p,f,r,n,i):(O(u=It(e,c),"value")&&(u.value=Ur(p,f,r,n,i)),d(t,c,u))):t[c]=n[h];else if("array"===s)for(g=0;g<a.length;g++)t[c=a[g]]=e[c];else for(g=0;g<a.length;g++)c=a[g],u=It(e,c),d(t,c,u);return Object.isExtensible(e)||Object.preventExtensions(t),Object.isSealed(e)&&Object.seal(t),Object.isFrozen(e)&&Object.freeze(t),t}function Pr(e,t){var r;if(arguments.length>1){if(!se(t))throw new TypeError("invalid argument. `level` must be a nonnegative integer. Value: `"+t+"`.");if(0===t)return e}else t=Q;return Ur(e,r=R(e)?new Array(e.length):{},[e],[r],t)}function Br(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t?new TypeError("invalid argument. A provided constructor must be either an object (except null) or a function. Value: `"+e+"`."):null}var $r=Object.create;function Lr(){}var Gr="function"==typeof $r?$r:function(e){return Lr.prototype=e,new Lr};function qr(e,t){var r=Br(e);if(r)throw r;if(r=Br(t))throw r;if(void 0===t.prototype)throw new TypeError("invalid argument. Second argument must have a prototype from which another object can inherit. Value: `"+t.prototype+"`.");return e.prototype=Gr(t.prototype),d(e.prototype,"constructor",{configurable:!0,enumerable:!1,writable:!0,value:e}),e}function Xr(e,t,r){d(e,t,{configurable:!0,enumerable:!1,writable:!0,value:r})}var Dr=r;function Zr(e){var t,r;for(t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);function n(){e.apply(null,t)}Dr.nextTick(n)}var Yr={objectMode:!1,allowHalfOpen:!1,readableObjectMode:!1};var Kr=Object.prototype;function Qr(e){var t;return!!function(e){return"object"==typeof e&&null!==e&&!R(e)}(e)&&(!(t=pe(e))||!O(e,"constructor")&&O(t,"constructor")&&G(t.constructor)&&"[object Function]"===M(t.constructor)&&O(t,"isPrototypeOf")&&G(t.isPrototypeOf)&&(t===Kr||function(e){var t;for(t in e)if(!O(e,t))return!1;return!0}(e)))}function en(e){return q(e)&&e>=0}function tn(e){return Y(e)&&e.valueOf()>=0}function rn(e){return en(e)||tn(e)}function nn(e,t){return Qr(t)?O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!m(e.readableObjectMode))?new TypeError("invalid option. `readableObjectMode` option must be a primitive boolean. Option: `"+e.readableObjectMode+"`."):O(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!m(e.allowHalfOpen))?new TypeError("invalid option. `allowHalfOpen` option must be a primitive boolean. Option: `"+e.allowHalfOpen+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}h(rn,"isPrimitive",en),h(rn,"isObject",tn);var on=g(Object.freeze({__proto__:null,default:()=>()=>{}})),an=on("inspect-stream"),sn=e.Transform;function un(e,t){var r,n,i;if(!(this instanceof un))return arguments.length>1?new un(e,t):new un(e);if(n=Pr(Yr),arguments.length>1){if(r=t,i=nn(n,e))throw i}else r=e;if(!G(r))throw new TypeError("invalid argument. Callback argument must be a function. Value: `"+r+"`.");return n.writableObjectMode=!0,an("Creating a transform stream configured with the following options: %s.",JSON.stringify(n)),sn.call(this,n),Xr(this,"_destroyed",!1),Xr(this,"_idx",-1),h(this,"_inspect",r),this}qr(un,sn),h(un.prototype,"_transform",(function(e,t,r){this._idx+=1,an("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),this._inspect.call(null,e,this._idx),this.push(e),r()})),h(un.prototype,"_flush",(function(e){an("Flushing the stream..."),e()})),h(un.prototype,"destroy",(function(e){var t;return this._destroyed?(an("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(an("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));an("Closing the stream..."),t.emit("close")})),this)})),h(un,"objectMode",(function(e,t){var r,n;if(arguments.length>1){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");r=Pr(e),n=t}else r={},n=e;return r.objectMode=!0,new un(r,n)})),h(un,"factory",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return r;function r(e){return new un(t,e)}}));var ln="debug-stream",cn=on(ln),fn={objectMode:!1,allowHalfOpen:!1,readableObjectMode:!1,name:""};function dn(e,t){return Qr(t)?O(t,"name")&&(e.name=t.name,!ge(e.name))?new TypeError("invalid option. `name` option must be a primitive string. Option: `"+e.name+"`."):O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!m(e.readableObjectMode))?new TypeError("invalid option. `readableObjectMode` option must be a primitive boolean. Option: `"+e.readableObjectMode+"`."):O(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!m(e.allowHalfOpen))?new TypeError("invalid option. `allowHalfOpen` option must be a primitive boolean. Option: `"+e.allowHalfOpen+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var pn=on;function hn(e,t){var r,n,i,o,a;if(!(this instanceof hn))return arguments.length>1?new hn(e,t):1===arguments.length?new hn(e):new hn;if(r=Pr(fn),arguments.length>1){if(!G(t))throw new TypeError("invalid argument. Callback argument must be a function. Value: `"+t+"`.");a=t,o=dn(r,e)}else arguments.length&&(G(e)?a=e:o=dn(r,e));if(o)throw o;return n=r.name?"debug-stream:"+r.name:ln,i=pn(n),cn("Creating a transform stream configured with the following options: %s.",JSON.stringify(r)),un.call(this,r,s),this;function s(e,t){if(a)return cn("Received a new chunk. Chunk: %s. Index: %d.",e.toString(),t),a(i,e,t);B(e)&&(e=e.toString()),e=JSON.stringify(e),cn("Received a new chunk. Chunk: %s. Index: %d.",e,t),i("Chunk: %s. Index: %d.",e,t)}}qr(hn,un),h(hn,"objectMode",(function(e,t){var r,n;if(arguments.length>1){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");if(r=Pr(e),n=t,!G(t))throw new TypeError("invalid argument. Callback argument must be a function. Value: `"+t+"`.")}else if(arguments.length)if(G(e))r={},n=e;else{if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");r=Pr(e)}else r={};return r.objectMode=!0,void 0===n?new hn(r):new hn(r,n)})),h(hn,"factory",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return r;function r(e,r){return t.name=e,arguments.length>1?new hn(t,r):new hn(t)}}));var gn={objectMode:!1,decodeStrings:!0,defaultEncoding:"utf8"};function bn(e,t){return Qr(t)?O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):O(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!m(e.decodeStrings))?new TypeError("invalid option. `decodeStrings` option must be a primitive boolean. Option: `"+e.decodeStrings+"`."):O(t,"defaultEncoding")&&(e.defaultEncoding=t.defaultEncoding,!ge(e.defaultEncoding))?new TypeError("invalid option. `defaultEncoding` option must be a primitive string. Option: `"+e.defaultEncoding+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var mn=on("inspect-stream-sink"),yn=e.Writable;function vn(e,t){var r,n,i;if(!(this instanceof vn))return arguments.length>1?new vn(e,t):new vn(e);if(n=Pr(gn),arguments.length>1){if(r=t,i=bn(n,e))throw i}else r=e;if(!G(r))throw new TypeError("invalid argument. Callback argument must be a function. Value: `"+r+"`.");return mn("Creating a writable stream configured with the following options: %s.",JSON.stringify(n)),yn.call(this,n),Xr(this,"_destroyed",!1),Xr(this,"_idx",-1),h(this,"_inspect",r),this}qr(vn,yn),h(vn.prototype,"_write",(function(e,t,r){if(this._idx+=1,mn("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),this._inspect.call(null,e,this._idx),this._destroyed)return Zr(r);r()})),h(vn.prototype,"destroy",(function(e){var t;return this._destroyed?(mn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(mn("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));mn("Closing the stream..."),t.emit("close")})),this)})),h(vn,"objectMode",(function(e,t){var r,n;if(arguments.length>1){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");r=Pr(e),n=t}else r={},n=e;return r.objectMode=!0,new vn(r,n)})),h(vn,"factory",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return r;function r(e){return new vn(t,e)}}));var wn="debug-stream-sink",jn=on(wn),On={objectMode:!1,decodeStrings:!0,defaultEncoding:"utf8",name:""};function _n(e,t){return Qr(t)?O(t,"name")&&(e.name=t.name,!ge(e.name))?new TypeError("invalid option. `name` option must be a primitive string. Option: `"+e.name+"`."):O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):O(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!m(e.decodeStrings))?new TypeError("invalid option. `decodeStrings` option must be a primitive boolean. Option: `"+e.decodeStrings+"`."):O(t,"defaultEncoding")&&(e.defaultEncoding=t.defaultEncoding,!ge(e.defaultEncoding))?new TypeError("invalid option. `defaultEncoding` option must be a primitive string. Option: `"+e.defaultEncoding+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var Mn=on;function En(e,t){var r,n,i,o,a;if(!(this instanceof En))return arguments.length>1?new En(e,t):1===arguments.length?new En(e):new En;if(r=Pr(On),arguments.length>1){if(!G(t))throw new TypeError("invalid argument. Callback argument must be a function. Value: `"+t+"`.");a=t,o=_n(r,e)}else arguments.length&&(G(e)?a=e:o=_n(r,e));if(o)throw o;return n=r.name?wn+":"+r.name:wn,i=Mn(n),jn("Creating a writable stream configured with the following options: %s.",JSON.stringify(r)),vn.call(this,r,s),this;function s(e,t){if(a)return jn("Received a new chunk. Chunk: %s. Index: %d.",e.toString(),t),a(i,e,t);B(e)&&(e=e.toString()),e=JSON.stringify(e),jn("Received a new chunk. Chunk: %s. Index: %d.",e,t),i("Chunk: %s. Index: %d.",e,t)}}qr(En,vn),h(En,"objectMode",(function(e,t){var r,n;if(arguments.length>1){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");if(r=Pr(e),n=t,!G(t))throw new TypeError("invalid argument. Callback argument must be a function. Value: `"+t+"`.")}else if(arguments.length)if(G(e))r={},n=e;else{if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");r=Pr(e)}else r={};return r.objectMode=!0,void 0===n?new En(r):new En(r,n)})),h(En,"factory",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return r;function r(e,r){return t.name=e,arguments.length>1?new En(t,r):new En(t)}}));var Sn={objectMode:!1};function Tn(e,t){return Qr(t)?O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")}var kn,An=on("empty-stream"),xn=e.Readable;function Vn(e){var t,r;if(!(this instanceof Vn))return arguments.length>0?new Vn(e):new Vn;if(t=Pr(Sn),arguments.length>0&&(r=Tn(t,e)))throw r;return An("Creating a readable stream configured with the following options: %s.",JSON.stringify(t)),xn.call(this,t),Xr(this,"_destroyed",!1),this}qr(Vn,xn),h(Vn.prototype,"_read",(function(){this.push(null)})),h(Vn.prototype,"destroy",(function(e){var t;return this._destroyed?(An("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(An("Stream was destroyed due to an error. Error: %s.",he(e)?e.message:JSON.stringify(e)),t.emit("error",e));An("Closing the stream..."),t.emit("close")})),this)})),h(Vn,"objectMode",(function(){return new Vn({objectMode:!0})})),h(Vn,"factory",(function(e){var t;return t=arguments.length>0?Pr(e,1):{},r;function r(){return new Vn(t)}})),kn=G(Ft.from)?function(e,t){if(!ge(e))throw new TypeError(Ye("invalid argument. First argument must be a string. Value: `%s`.",e));if(arguments.length>1){if(!ge(t))throw new TypeError(Ye("invalid argument. Second argument must be a string. Value: `%s`.",t));return Ft.from(e,t)}return Ft.from(e,"utf8")}:function(e,t){if(!ge(e))throw new TypeError(Ye("invalid argument. First argument must be a string. Value: `%s`.",e));if(arguments.length>1){if(!ge(t))throw new TypeError(Ye("invalid argument. Second argument must be a string. Value: `%s`.",t));return new Ft(e,t)}return new Ft(e,"utf8")};var Wn=kn,In={objectMode:!1,encoding:null,sep:"\n",dir:1};function Cn(e,t){return Qr(t)?O(t,"sep")&&(e.sep=t.sep,!ge(e.sep))?new TypeError("invalid option. `sep` option must be a primitive string. Option: `"+e.sep+"`."):O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"encoding")&&(e.encoding=t.encoding,!ge(e.encoding)&&null!==e.encoding)?new TypeError("invalid option. `encoding` option must be a primitive string or null. Option: `"+e.encoding+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):O(t,"serialize")&&(e.serialize=t.serialize,!G(e.serialize))?new TypeError("invalid option. `serialize` option must be a function. Option: `"+e.serialize+"`."):O(t,"dir")&&(e.dir=t.dir,1!==e.dir&&-1!==e.dir)?new TypeError("invalid option. `dir` option must be either `1` or `-1`. Option: `"+e.dir+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")}var Nn=on("from-array-stream"),zn=e.Readable;function Fn(e,t){var r,n;if(!(this instanceof Fn))return arguments.length>1?new Fn(e,t):new Fn(e);if(!rt(e))throw new TypeError("invalid argument. First argument must be an array-like object. Value: `"+e+"`.");if(r=Pr(In),arguments.length>1&&(n=Cn(r,t)))throw n;return Nn("Creating a readable stream configured with the following options: %s.",JSON.stringify(r)),zn.call(this,r),Xr(this,"_destroyed",!1),h(this,"_objectMode",r.objectMode),h(this,"_sep",r.sep),h(this,"_serialize",r.serialize||JSON.stringify),h(this,"_src",e),h(this,"_stride",r.dir),Xr(this,"_i",0),Xr(this,"_idx",1===r.dir?0:e.length-1),this}qr(Fn,zn),h(Fn.prototype,"_read",(function(){var e,t,r;if(!this._destroyed)for(e=!0;e;){if(t=null,this._i+=1,this._i>this._src.length)return Nn("Finished iteration."),this.push(null);r=this._src[this._idx],Nn("Value: %s. Idx: %d. Iter: %d.",JSON.stringify(r),this._idx,this._i),this._idx+=this._stride,!1===this._objectMode&&("string"==typeof(r=this._serialize(r))?r=1===this._i?Wn(r):Wn(this._sep+r):B(r)?this._i>1&&(r=Ft.concat([Wn(this._sep),r])):t=new Error("invalid operation. Serialization function must return a string or Buffer. Value: `"+r+"`.")),t?this.emit("error",t):e=this.push(r)}})),h(Fn.prototype,"destroy",(function(e){var t;return this._destroyed?(Nn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(Nn("Stream was destroyed due to an error. Error: %s.",he(e)?e.message:JSON.stringify(e)),t.emit("error",e));Nn("Closing the stream..."),t.emit("close")})),this)})),h(Fn,"objectMode",(function(e,t){var r;if(arguments.length>1){if(!Qr(r=t))throw new TypeError("invalid argument. Options must be an object. Value: `"+r+"`.");r=Pr(t,1)}else r={};return r.objectMode=!0,new Fn(e,r)})),h(Fn,"factory",(function(e){var t;return t=arguments.length?Pr(e,1):{},r;function r(e){return new Fn(e,t)}}));var Hn={objectMode:!1,encoding:null,sep:"\n",iter:1e308,dir:1};function Jn(e,t){return Qr(t)?O(t,"sep")&&(e.sep=t.sep,!ge(e.sep))?new TypeError("invalid option. `sep` option must be a primitive string. Option: `"+e.sep+"`."):O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"encoding")&&(e.encoding=t.encoding,!ge(e.encoding)&&null!==e.encoding)?new TypeError("invalid option. `encoding` option must be a primitive string or null. Option: `"+e.encoding+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):O(t,"serialize")&&(e.serialize=t.serialize,!G(e.serialize))?new TypeError("invalid option. `serialize` option must be a function. Option: `"+e.serialize+"`."):O(t,"iter")&&(e.iter=t.iter,!se(e.iter))?new TypeError("invalid option. `iter` option must be a nonnegative integer. Option: `"+e.iter+"`."):O(t,"dir")&&(e.dir=t.dir,1!==e.dir&&-1!==e.dir)?new TypeError("invalid option. `dir` option must be either `1` or `-1`. Option: `"+e.dir+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")}var Rn=on("from-circular-array-stream"),Un=e.Readable;function Pn(e,t){var r,n;if(!(this instanceof Pn))return arguments.length>1?new Pn(e,t):new Pn(e);if(!rt(e))throw new TypeError("invalid argument. First argument must be an array-like object. Value: `"+e+"`.");if(r=Pr(Hn),arguments.length>1&&(n=Jn(r,t)))throw n;return Rn("Creating a readable stream configured with the following options: %s.",JSON.stringify(r)),Un.call(this,r),Xr(this,"_destroyed",!1),h(this,"_objectMode",r.objectMode),h(this,"_sep",r.sep),h(this,"_serialize",r.serialize||JSON.stringify),h(this,"_src",e),h(this,"_stride",r.dir),h(this,"_iter",r.iter),Xr(this,"_i",0),Xr(this,"_idx",1===r.dir?-1:e.length),this}qr(Pn,Un),h(Pn.prototype,"_read",(function(){var e,t,r;if(!this._destroyed)for(e=!0;e;){if(t=null,this._i+=1,this._i>this._iter||0===this._src.length)return Rn("Finished iteration."),this.push(null);this._idx+=this._stride,this._stride>0&&this._idx>=this._src.length?this._idx%=this._src.length:this._stride<0&&this._idx<0&&(this._idx+=this._src.length),r=this._src[this._idx],Rn("Value: %s. Idx: %d. Iter: %d.",JSON.stringify(r),this._idx,this._i),!1===this._objectMode&&("string"==typeof(r=this._serialize(r))?r=1===this._i?Wn(r):Wn(this._sep+r):B(r)?this._i>1&&(r=Ft.concat([Wn(this._sep),r])):t=new Error("invalid operation. Serialization function must return a string or Buffer. Value: `"+r+"`.")),t?this.emit("error",t):e=this.push(r)}})),h(Pn.prototype,"destroy",(function(e){var t;return this._destroyed?(Rn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(Rn("Stream was destroyed due to an error. Error: %s.",he(e)?e.message:JSON.stringify(e)),t.emit("error",e));Rn("Closing the stream..."),t.emit("close")})),this)})),h(Pn,"objectMode",(function(e,t){var r;if(arguments.length>1){if(!Qr(r=t))throw new TypeError("invalid argument. Options must be an object. Value: `"+r+"`.");r=Pr(t,1)}else r={};return r.objectMode=!0,new Pn(e,r)})),h(Pn,"factory",(function(e){var t;return t=arguments.length?Pr(e,1):{},r;function r(e){return new Pn(e,t)}}));var Bn=Object.prototype.toString;var $n=new Function("try {return this === global;} catch ( err ) {return false;}")(),Ln=r,Gn=I(),qn=/node|io\.js/;var Xn,Dn,Zn="object"==typeof global&&global===Gn&&Gn===Gn.global&&("[object global]"===M(Gn)||"[object Object]"===M(Gn))&&!0===$n&&"object"==typeof Ln&&"[object process]"===(Xn=Ln,Bn.call(Xn))&&Qr(Ln.versions)&&ge(Ln.versions.node)&&(void 0===Ln.release||Qr(Ln.release)&&ge(Ln.release.name)&&qn.test(Ln.release.name)),Yn=r.versions.node,Kn=(Dn=Zn?Yn:null,Dn?parseInt(Dn.split(".")[0],10):-1),Qn=G(Ft.from)&&Kn>=5,ei="function"==typeof ArrayBuffer;function ti(e){return ei&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===M(e)}var ri,ni=G(Ft.from)?function(e){if(!rt(e))throw new TypeError("invalid argument. Must provide an array-like object. Value: `"+e+"`");return Ft.from(e)}:function(e){if(!rt(e))throw new TypeError("invalid argument. Must provide an array-like object. Value: `"+e+"`");return new Ft(e)};ri=Qn?function(e,t,r){var n,i;if(!ti(e))throw new TypeError("invalid argument. First argument must be an ArrayBuffer. Value: `"+e+"`");if(arguments.length>1){if(!se(t))throw new TypeError("invalid argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");if(t>e.byteLength)throw new RangeError("invalid argument. Second argument must not exceed the number of bytes in the input ArrayBuffer. Value: `"+t+"`.");if(n=t,arguments.length>2){if(!se(r))throw new TypeError("invalid argument. Last argument must be a nonnegative integer. Value: `"+r+"`.");if(r>e.byteLength)throw new RangeError("invalid argument. Last argument must not exceed the number of bytes in the input ArrayBuffer. Value: `"+r+"`.");i=r}else i=e.byteLength-n}else n=0,i=e.byteLength;return 0===i&&Kn<6?Ft.from([]):Ft.from(e,n,i)}:function(e,t,r){var n;if(!ti(e))throw new TypeError("invalid argument. First argument must be an ArrayBuffer. Value: `"+e+"`");if(arguments.length>1){if(!se(t))throw new TypeError("invalid argument. Second argument must be a nonnegative integer. Value: `"+t+"`.");if(t>e.byteLength)throw new RangeError("invalid argument. Second argument must not exceed the number of bytes in the input ArrayBuffer. Value: `"+t+"`.");if(arguments.length>2){if(!se(r))throw new TypeError("invalid argument. Last argument must be a nonnegative integer. Value: `"+r+"`.");if(r>e.byteLength)throw new RangeError("invalid argument. Last argument must not exceed the number of bytes in the input ArrayBuffer. Value: `"+r+"`.");n=r}else n=e.byteLength-t;return ni(new Dt(e,t,n))}return Kn<3?ni(new Dt(e)):0===e.byteLength?new Ft([]):new Ft(e)};var ii=ri,oi={objectMode:!1,encoding:null,sep:"\n",iter:1e308};function ai(e,t){return Qr(t)?O(t,"sep")&&(e.sep=t.sep,!ge(e.sep))?new TypeError("invalid option. `sep` option must be a primitive string. Option: `"+e.sep+"`."):O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"encoding")&&(e.encoding=t.encoding,!ge(e.encoding)&&null!==e.encoding)?new TypeError("invalid option. `encoding` option must be a primitive string or null. Option: `"+e.encoding+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):O(t,"iter")&&(e.iter=t.iter,!se(e.iter))?new TypeError("invalid option. `iter` option must be a nonnegative integer. Option: `"+e.iter+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")}var si=on("from-constant-stream"),ui=e.Readable;function li(e,t){var r,n;if(!(this instanceof li))return arguments.length>1?new li(e,t):new li(e);if(r=Pr(oi),arguments.length>1&&(n=ai(r,t)))throw n;if(!1===r.objectMode)if(ge(e))e=Wn(e);else if(B(e));else{if(!Lt(e))throw new TypeError("invalid argument. In binary mode, a provided value must be a string, Buffer, or Uint8Array. Value: `"+e+"`.");e=ii(e.buffer,e.byteOffset,e.length)}return si("Creating a readable stream configured with the following options: %s.",JSON.stringify(r)),ui.call(this,r),Xr(this,"_destroyed",!1),h(this,"_objectMode",r.objectMode),h(this,"_sep",Wn(r.sep)),h(this,"_iter",r.iter),h(this,"_value",e),Xr(this,"_i",0),this}function ci(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)&&G(e.next)}qr(li,ui),h(li.prototype,"_read",(function(){var e;if(!this._destroyed)for(e=!0;e;){if(this._i+=1,this._i>this._iter)return si("Finished iteration."),this.push(null);si("Value: %s. Iter: %d.",this._value,this._i),e=!1===this._objectMode&&this._i>1?this.push(Ft.concat([this._sep,this._value])):this.push(this._value)}})),h(li.prototype,"destroy",(function(e){var t;return this._destroyed?(si("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(si("Stream was destroyed due to an error. Error: %s.",he(e)?e.message:JSON.stringify(e)),t.emit("error",e));si("Closing the stream..."),t.emit("close")})),this)})),h(li,"objectMode",(function(e,t){var r;if(arguments.length>1){if(!Qr(r=t))throw new TypeError("invalid argument. Options must be an object. Value: `"+r+"`.");r=Pr(t,1)}else r={};return r.objectMode=!0,new li(e,r)})),h(li,"factory",(function(e,t){var r,n,i;return 0===(r=arguments.length)?(n={},i=!0):1===r?null!==e&&"object"==typeof e&&(O(e,"sep")||O(e,"iter")||O(e,"objectMode")||O(e,"encoding")||O(e,"highWaterMark"))?(n=Pr(e,1),i=!0):n={}:n=Pr(t,1),i?o:a;function o(e){return new li(e,n)}function a(){return new li(e,n)}}));var fi={objectMode:!1,encoding:null,sep:"\n"};function di(e,t){return Qr(t)?O(t,"sep")&&(e.sep=t.sep,!ge(e.sep))?new TypeError("invalid option. `sep` option must be a primitive string. Option: `"+e.sep+"`."):O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"encoding")&&(e.encoding=t.encoding,!ge(e.encoding)&&null!==e.encoding)?new TypeError("invalid option. `encoding` option must be a primitive string or null. Option: `"+e.encoding+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):O(t,"serialize")&&(e.serialize=t.serialize,!G(e.serialize))?new TypeError("invalid option. `serialize` option must be a function. Option: `"+e.serialize+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")}var pi=on("from-iterator-stream"),hi=e.Readable;function gi(e,t){var r,n;if(!(this instanceof gi))return arguments.length>1?new gi(e,t):new gi(e);if(!ci(e))throw new TypeError("invalid argument. First argument must be an iterator. Value: `"+e+"`.");if(r=Pr(fi),arguments.length>1&&(n=di(r,t)))throw n;return pi("Creating a readable stream configured with the following options: %s.",JSON.stringify(r)),hi.call(this,r),Xr(this,"_destroyed",!1),h(this,"_objectMode",r.objectMode),h(this,"_sep",r.sep),h(this,"_serialize",r.serialize||JSON.stringify),h(this,"_iterator",e),Xr(this,"_i",0),this}qr(gi,hi),h(gi.prototype,"_read",(function(){var e,t,r;if(!this._destroyed)for(e=!0;e;){if(r=this._iterator.next(),this._i+=1,r.done)return O(r,"value")&&(r=r.value,pi("Value: %s. Iter: %d.",JSON.stringify(r),this._i),!1===this._objectMode&&("string"==typeof(r=this._serialize(r))?(r=1===this._i?Wn(r):Wn(this._sep+r),this.push(r)):B(r)?(this._i>1&&(r=Ft.concat([Wn(this._sep),r])),this.push(r)):(t=new Error("invalid operation. Serialization function must return a string or Buffer. Value: `"+r+"`."),this.emit("error",t)))),pi("Finished iteration."),this.push(null);if(r=r.value,pi("Value: %s. Iter: %d.",JSON.stringify(r),this._i),!1===this._objectMode)if("string"==typeof(r=this._serialize(r)))r=1===this._i?Wn(r):Wn(this._sep+r);else{if(!B(r)){t=new Error("invalid operation. Serialization function must return a string or Buffer. Value: `"+r+"`."),this.emit("error",t);continue}this._i>1&&(r=Ft.concat([Wn(this._sep),r]))}e=this.push(r)}})),h(gi.prototype,"destroy",(function(e){var t;return this._destroyed?(pi("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(pi("Stream was destroyed due to an error. Error: %s.",he(e)?e.message:JSON.stringify(e)),t.emit("error",e));pi("Closing the stream..."),t.emit("close")})),this)})),h(gi,"objectMode",(function(e,t){var r;if(arguments.length>1){if(!Qr(r=t))throw new TypeError("invalid argument. Options must be an object. Value: `"+r+"`.");r=Pr(t,1)}else r={};return r.objectMode=!0,new gi(e,r)})),h(gi,"factory",(function(e){var t;return t=arguments.length?Pr(e,1):{},r;function r(e){return new gi(e,t)}}));var bi={objectMode:!1,encoding:null,sep:"\n"};function mi(e,t){return Qr(t)?O(t,"sep")&&(e.sep=t.sep,!ge(e.sep))?new TypeError("invalid option. `sep` option must be a primitive string. Option: `"+e.sep+"`."):O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"encoding")&&(e.encoding=t.encoding,!ge(e.encoding)&&null!==e.encoding)?new TypeError("invalid option. `encoding` option must be a primitive string or null. Option: `"+e.encoding+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):O(t,"serialize")&&(e.serialize=t.serialize,!G(e.serialize))?new TypeError("invalid option. `serialize` option must be a function. Option: `"+e.serialize+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")}var yi=on("from-strided-array-stream"),vi=e.Readable;function wi(e,t,r,n,i){var o,a,s;if(!(this instanceof wi))return arguments.length>4?new wi(e,t,r,n,i):new wi(e,t,r,n);if(!se(e))throw new TypeError("invalid argument. First argument must be a nonnegative integer. Value: `"+e+"`.");if(!rt(t))throw new TypeError("invalid argument. Second argument must be an array-like object. Value: `"+t+"`.");if(!ie(r))throw new TypeError("invalid argument. Third argument must be an integer. Value: `"+r+"`.");if(!se(n))throw new TypeError("invalid argument. Fourth argument must be a nonnegative integer. Value: `"+n+"`.");if(e>0&&(s=n+(e-1)*r,n>=t.length||s<0||s>=t.length))throw new RangeError("invalid arguments. Strided array parameters are incompatible with the provided array-like object. Linear index exceeds array bounds.");if(o=Pr(bi),arguments.length>4&&(a=mi(o,i)))throw a;return yi("Creating a readable stream configured with the following options: %s.",JSON.stringify(o)),vi.call(this,o),Xr(this,"_destroyed",!1),h(this,"_objectMode",o.objectMode),h(this,"_sep",o.sep),h(this,"_serialize",o.serialize||JSON.stringify),h(this,"_buffer",t),h(this,"_N",e),h(this,"_stride",r),h(this,"_offset",n),Xr(this,"_idx",n),Xr(this,"_i",0),this}qr(wi,vi),h(wi.prototype,"_read",(function(){var e,t,r;if(!this._destroyed)for(e=!0;e;){if(t=null,this._i+=1,this._i>this._N)return yi("Finished iteration."),this.push(null);r=this._buffer[this._idx],yi("Value: %s. Idx: %d. Iter: %d.",JSON.stringify(r),this._idx,this._i),this._idx+=this._stride,!1===this._objectMode&&("string"==typeof(r=this._serialize(r))?r=1===this._i?Wn(r):Wn(this._sep+r):B(r)?this._i>1&&(r=Ft.concat([Wn(this._sep),r])):t=new Error("invalid operation. Serialization function must return a string or Buffer. Value: `"+r+"`.")),t?this.emit("error",t):e=this.push(r)}})),h(wi.prototype,"destroy",(function(e){var t;return this._destroyed?(yi("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(yi("Stream was destroyed due to an error. Error: %s.",he(e)?e.message:JSON.stringify(e)),t.emit("error",e));yi("Closing the stream..."),t.emit("close")})),this)})),h(wi,"objectMode",(function(e,t,r,n,i){var o;if(arguments.length>4){if(!Qr(o=i))throw new TypeError("invalid argument. Options must be an object. Value: `"+o+"`.");o=Pr(i,1)}else o={};return o.objectMode=!0,new wi(e,t,r,n,o)})),h(wi,"factory",(function(e){var t;return t=arguments.length?Pr(e,1):{},r;function r(e,r,n,i){return new wi(e,r,n,i,t)}}));var ji={objectMode:!1,encoding:null,allowHalfOpen:!1,readableObjectMode:!1,sep:"\n"};function Oi(e,t){return Qr(t)?O(t,"sep")&&(e.sep=t.sep,!ge(e.sep))?new TypeError("invalid option. `sep` option must be a primitive string. Option: `"+e.sep+"`."):O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!m(e.readableObjectMode))?new TypeError("invalid option. `readableObjectMode` option must be a primitive boolean. Option: `"+e.readableObjectMode+"`."):O(t,"encoding")&&(e.encoding=t.encoding,!ge(e.encoding))?new TypeError("invalid option. `encoding` option must be a primitive string. Option: `"+e.encoding+"`."):O(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!m(e.allowHalfOpen))?new TypeError("invalid option. `allowHalfOpen` option must be a primitive boolean. Option: `"+e.allowHalfOpen+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")}var _i=on("join-stream"),Mi=e.Transform;function Ei(e){var t,r;if(!(this instanceof Ei))return arguments.length?new Ei(e):new Ei;if(t=Pr(ji),arguments.length&&(r=Oi(t,e)))throw r;return t.writableObjectMode=!0,t.decodeStrings=!1,_i("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),Mi.call(this,t),Xr(this,"_destroyed",!1),h(this,"_encoding",null===t.encoding?"utf8":t.encoding),"utf8"!==this._encoding&&(t.sep=Wn(t.sep,this._encoding)),h(this,"_sep",t.sep),Xr(this,"_init",!1),Xr(this,"_idx",-1),this}qr(Ei,Mi),h(Ei.prototype,"_transform",(function(e,t,r){var n;this._idx+=1,_i("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),"utf8"===this._encoding?this._init?e=this._sep+e:this._init=!0:this._init?(e=new Ft(e,t),n=this._sep.length+e.length,e=(e=Ft.concat([this._sep,e],n)).toString(this._encoding)):this._init=!0,this.push(e,this._encoding),r()})),h(Ei.prototype,"_flush",(function(e){_i("Flushing the stream..."),e()})),h(Ei.prototype,"destroy",(function(e){var t;return this._destroyed?(_i("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(_i("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));_i("Closing the stream..."),t.emit("close")})),this)})),h(Ei,"objectMode",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return t.objectMode=!0,new Ei(t)})),h(Ei,"factory",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return r;function r(){return new Ei(t)}}));var Si={objectMode:!1,encoding:null,allowHalfOpen:!1,writableObjectMode:!1,sep:null},Ti=RegExp.prototype.exec;var ki=v();function Ai(e){return"object"==typeof e&&(e instanceof RegExp||(ki?function(e){try{return Ti.call(e),!0}catch(e){return!1}}(e):"[object RegExp]"===M(e)))}function xi(e,t){return Qr(t)?!O(t,"sep")||(e.sep=t.sep,ge(e.sep)||Ai(e.sep))?O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a boolean primitive. Option: `"+e.objectMode+"`."):O(t,"writableObjectMode")&&(e.writableObjectMode=t.writableObjectMode,!m(e.writableObjectMode))?new TypeError("invalid option. `writableObjectMode` option must be a boolean primitive. Option: `"+e.writableObjectMode+"`."):O(t,"encoding")&&(e.encoding=t.encoding,!ge(e.encoding))?new TypeError("invalid option. `encoding` option must be a string primitive. Option: `"+e.encoding+"`."):O(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!m(e.allowHalfOpen))?new TypeError("invalid option. `allowHalfOpen` option must be a boolean primitive. Option: `"+e.allowHalfOpen+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):null:new TypeError("invalid option. `sep` option must be either a primitive string or a regular expression. Option: `"+e.sep+"`."):new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")}var Vi=on("split-stream");function Wi(e,t){return"utf8"===t||"buffer"===t?e:(e=Wn(e),t?e.toString(t):e.toString())}var Ii=e.Transform,Ci=/\r?\n/;function Ni(e){var t,r;if(!(this instanceof Ni))return arguments.length?new Ni(e):new Ni;if(t=Pr(Si),arguments.length&&(r=xi(t,e)))throw r;return t.readableObjectMode=!0,t.decodeStrings=!1,Vi("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),Ii.call(this,t),h(this,"_sep",null===t.sep?Ci:t.sep),Xr(this,"_destroyed",!1),h(this,"_encoding",t.encoding),Xr(this,"_buffer",""),Xr(this,"_idx",-1),this}qr(Ni,Ii),h(Ni.prototype,"_transform",(function(e,t,r){var n,i,o,a;if(this._idx+=1,Vi("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),"buffer"===t?e=e.toString():"utf8"!==t&&(e=(e=new Ft(e,t)).toString("utf8")),n=e.split(this._sep),Vi("Splits: %s. Index: %d.",JSON.stringify(n),this._idx),o=n.length-1,Vi("%s splits. Index: %d.",o,this._idx),0===o)Vi("No splits. Index: %d.",this._idx),this._buffer+=n[o];else{for(Vi("Processing splits. Index: %d.",this._index),i=Wi(i=this._buffer+n[0],t),Vi("Split %d: %s. Index: %d.",0,i.toString(),this._idx),this.push(i,t),a=1;a<o;a++)i=Wi(n[a],t),Vi("Split %d: %s. Index: %d.",a,i.toString(),this._idx),this.push(i,t);Vi("Remaining split: %s.",n[o].toString()),this._buffer=n[o]}r()})),h(Ni.prototype,"_flush",(function(e){var t=this._buffer;t&&(Vi("Processing final split..."),t=Wi(t,this._encoding),this.push(t,this._encoding)),Vi("Flushing the stream..."),e()})),h(Ni.prototype,"destroy",(function(e){var t;return this._destroyed?(Vi("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(Vi("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));Vi("Closing the stream..."),t.emit("close")})),this)})),h(Ni,"objectMode",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return t.objectMode=!0,new Ni(t)})),h(Ni,"factory",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return r;function r(){return new Ni(t)}}));var zi=r.stderr,Fi=r.stdin,Hi=r.stdout,Ji={objectMode:!1,encoding:null,allowHalfOpen:!1,decodeStrings:!0};function Ri(e,t){return Qr(t)?O(t,"transform")&&(e.transform=t.transform,!G(e.transform))?new TypeError("invalid option. `transform` option must be a function. Option: `"+e.transform+"`."):O(t,"flush")&&(e.flush=t.flush,!G(e.flush))?new TypeError("invalid option. `flush` option must be a function. Option: `"+e.flush+"`."):O(t,"objectMode")&&(e.objectMode=t.objectMode,!m(e.objectMode))?new TypeError("invalid option. `objectMode` option must be a primitive boolean. Option: `"+e.objectMode+"`."):O(t,"encoding")&&(e.encoding=t.encoding,!ge(e.encoding))?new TypeError("invalid option. `encoding` option must be a primitive string. Option: `"+e.encoding+"`."):O(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!m(e.allowHalfOpen))?new TypeError("invalid option. `allowHalfOpen` option must be a primitive boolean. Option: `"+e.allowHalfOpen+"`."):O(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!en(e.highWaterMark))?new TypeError("invalid option. `highWaterMark` option must be a nonnegative number. Option: `"+e.highWaterMark+"`."):O(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!m(e.decodeStrings))?new TypeError("invalid option. `decodeStrings` option must be a primitive boolean. Option: `"+e.decodeStrings+"`."):null:new TypeError("invalid argument. Options must be an object. Value: `"+t+"`.")}var Ui=on("transform-stream:destroy");function Pi(e){var t;return this._destroyed?(Ui("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Zr((function(){e&&(Ui("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));Ui("Closing the stream..."),t.emit("close")})),this)}var Bi=on("transform-stream:transform");function $i(e,t,r){Bi("Received a new chunk. Chunk: %s. Encoding: %s.",e.toString(),t),r(null,e)}var Li=on,Gi=e.Transform,qi=Li("transform-stream:main");function Xi(e){var t,r;if(!(this instanceof Xi))return arguments.length?new Xi(e):new Xi;if(t=Pr(Ji),arguments.length&&(r=Ri(t,e)))throw r;return qi("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),Gi.call(this,t),this._destroyed=!1,t.transform?this._transform=t.transform:this._transform=$i,t.flush&&(this._flush=t.flush),this}qr(Xi,Gi),Xi.prototype.destroy=Pi;var Di=on,Zi=e.Transform,Yi=Di("transform-stream:ctor");h(Xi,"objectMode",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return t.objectMode=!0,new Xi(t)})),h(Xi,"factory",(function(e){var t;if(arguments.length){if(!Qr(e))throw new TypeError("invalid argument. Options argument must be an object. Value: `"+e+"`.");t=Pr(e)}else t={};return r;function r(e,r){return t.transform=e,arguments.length>1?t.flush=r:delete t.flush,new Xi(t)}})),h(Xi,"ctor",(function(e){var t,r,n;if(r=Pr(Ji),arguments.length&&(n=Ri(r,e)))throw n;function i(e){var t,n;if(!(this instanceof i))return arguments.length?new i(e):new i;if(t=Pr(r),arguments.length&&(n=Ri(t,e)))throw n;return Yi("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),Zi.call(this,t),this._destroyed=!1,this}return t=r.transform?r.transform:$i,qr(i,Zi),i.prototype._transform=t,r.flush&&(i.prototype._flush=r.flush),i.prototype.destroy=Pi,i}));var Ki={};return p(Ki,"debugStream",hn),p(Ki,"debugSinkStream",En),p(Ki,"emptyStream",Vn),p(Ki,"arrayStream",Fn),p(Ki,"circularArrayStream",Pn),p(Ki,"constantStream",li),p(Ki,"iteratorStream",gi),p(Ki,"stridedArrayStream",wi),p(Ki,"inspectStream",un),p(Ki,"inspectSinkStream",vn),p(Ki,"joinStream",Ei),p(Ki,"splitStream",Ni),p(Ki,"stderr",zi),p(Ki,"stdin",Fi),p(Ki,"stdout",Hi),p(Ki,"transformStream",Xi),Ki}));
//# sourceMappingURL=index.js.map
