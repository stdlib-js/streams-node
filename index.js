// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("stream"),require("process"),require("buffer")):"function"==typeof define&&define.amd?define(["stream","process","buffer"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).streams=t(e.require$$0$2,e.require$$0$1,e.require$$0$3)}(this,(function(e,t,r){"use strict";var n="function"==typeof Object.defineProperty?Object.defineProperty:null;var i=Object.defineProperty;function o(e){return"number"==typeof e}function a(e){var t,r="";for(t=0;t<e;t++)r+="0";return r}function s(e,t,r){var n=!1,i=t-e.length;return i<0||(function(e){return"-"===e[0]}(e)&&(n=!0,e=e.substr(1)),e=r?e+a(i):a(i)+e,n&&(e="-"+e)),e}var u=String.prototype.toLowerCase,l=String.prototype.toUpperCase;function c(e){var t,r,n;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(r=e.arg,n=parseInt(r,10),!isFinite(n)){if(!o(r))throw new Error("invalid integer. Value: "+r);n=0}return n<0&&("u"===e.specifier||10!==t)&&(n=4294967295+n+1),n<0?(r=(-n).toString(t),e.precision&&(r=s(r,e.precision,e.padRight)),r="-"+r):(r=n.toString(t),n||e.precision?e.precision&&(r=s(r,e.precision,e.padRight)):r="",e.sign&&(r=e.sign+r)),16===t&&(e.alternate&&(r="0x"+r),r=e.specifier===l.call(e.specifier)?l.call(r):u.call(r)),8===t&&e.alternate&&"0"!==r.charAt(0)&&(r="0"+r),r}function d(e){return"string"==typeof e}var f=Math.abs,p=String.prototype.toLowerCase,h=String.prototype.toUpperCase,g=String.prototype.replace,b=/e\+(\d)$/,m=/e-(\d)$/,y=/^(\d+)$/,w=/^(\d+)e/,v=/\.0$/,j=/\.0*e/,_=/(\..*[^0])0*e/;function O(e){var t,r,n=parseFloat(e.arg);if(!isFinite(n)){if(!o(e.arg))throw new Error("invalid floating-point number. Value: "+r);n=e.arg}switch(e.specifier){case"e":case"E":r=n.toExponential(e.precision);break;case"f":case"F":r=n.toFixed(e.precision);break;case"g":case"G":f(n)<1e-4?((t=e.precision)>0&&(t-=1),r=n.toExponential(t)):r=n.toPrecision(e.precision),e.alternate||(r=g.call(r,_,"$1e"),r=g.call(r,j,"e"),r=g.call(r,v,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return r=g.call(r,b,"e+0$1"),r=g.call(r,m,"e-0$1"),e.alternate&&(r=g.call(r,y,"$1."),r=g.call(r,w,"$1.e")),n>=0&&e.sign&&(r=e.sign+r),r=e.specifier===h.call(e.specifier)?h.call(r):p.call(r)}function M(e){var t,r="";for(t=0;t<e;t++)r+=" ";return r}function E(e,t,r){var n=t-e.length;return n<0?e:e=r?e+M(n):M(n)+e}var T=String.fromCharCode,S=isNaN,k=Array.isArray;function V(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function x(e){var t,r,n,i,o,a,u,l,f;if(!k(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(a="",u=1,l=0;l<e.length;l++)if(d(n=e[l]))a+=n;else{if(t=void 0!==n.precision,!(n=V(n)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+l+"`. Value: `"+n+"`.");for(n.mapping&&(u=n.mapping),r=n.flags,f=0;f<r.length;f++)switch(i=r.charAt(f)){case" ":n.sign=" ";break;case"+":n.sign="+";break;case"-":n.padRight=!0,n.padZeros=!1;break;case"0":n.padZeros=r.indexOf("-")<0;break;case"#":n.alternate=!0;break;default:throw new Error("invalid flag: "+i)}if("*"===n.width){if(n.width=parseInt(arguments[u],10),u+=1,S(n.width))throw new TypeError("the argument for * width at position "+u+" is not a number. Value: `"+n.width+"`.");n.width<0&&(n.padRight=!0,n.width=-n.width)}if(t&&"*"===n.precision){if(n.precision=parseInt(arguments[u],10),u+=1,S(n.precision))throw new TypeError("the argument for * precision at position "+u+" is not a number. Value: `"+n.precision+"`.");n.precision<0&&(n.precision=1,t=!1)}switch(n.arg=arguments[u],n.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(n.padZeros=!1),n.arg=c(n);break;case"s":n.maxWidth=t?n.precision:-1;break;case"c":if(!S(n.arg)){if((o=parseInt(n.arg,10))<0||o>127)throw new Error("invalid character code. Value: "+n.arg);n.arg=S(o)?String(n.arg):T(o)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(n.precision=6),n.arg=O(n);break;default:throw new Error("invalid specifier: "+n.specifier)}n.maxWidth>=0&&n.arg.length>n.maxWidth&&(n.arg=n.arg.substring(0,n.maxWidth)),n.padZeros?n.arg=s(n.arg,n.width||n.precision,n.padRight):n.width&&(n.arg=E(n.arg,n.width,n.padRight)),a+=n.arg||"",u+=1}return a}var W=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function C(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function N(e){var t,r,n,i;for(r=[],i=0,n=W.exec(e);n;)(t=e.slice(i,W.lastIndex-n[0].length)).length&&r.push(t),r.push(C(n)),i=W.lastIndex,n=W.exec(e);return(t=e.slice(i)).length&&r.push(t),r}function A(e){return"string"==typeof e}function I(e){var t,r,n;if(!A(e))throw new TypeError(I("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=N(e),(r=new Array(arguments.length))[0]=t,n=1;n<r.length;n++)r[n]=arguments[n];return x.apply(null,r)}var z,H=Object.prototype,J=H.toString,F=H.__defineGetter__,R=H.__defineSetter__,P=H.__lookupGetter__,B=H.__lookupSetter__;z=function(){try{return n({},"x",{}),!0}catch(e){return!1}}()?i:function(e,t,r){var n,i,o,a;if("object"!=typeof e||null===e||"[object Array]"===J.call(e))throw new TypeError(I("invalid argument. First argument must be an object. Value: `%s`.",e));if("object"!=typeof r||null===r||"[object Array]"===J.call(r))throw new TypeError(I("invalid argument. Property descriptor must be an object. Value: `%s`.",r));if((i="value"in r)&&(P.call(e,t)||B.call(e,t)?(n=e.__proto__,e.__proto__=H,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,a="set"in r,i&&(o||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&F&&F.call(e,t,r.get),a&&R&&R.call(e,t,r.set),e};var L=z;function $(e,t,r){L(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}function U(e,t,r){L(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}function q(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){if(this instanceof e){var r=[null];r.push.apply(r,arguments);var n=Function.bind.apply(t,r);return new n}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var G=/./;function X(e){return"boolean"==typeof e}var Z="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");function Y(){return Z&&"symbol"==typeof Symbol.toStringTag}var D=Object.prototype.toString;var K=Object.prototype.hasOwnProperty;function Q(e,t){return null!=e&&K.call(e,t)}var ee="function"==typeof Symbol?Symbol:void 0,te="function"==typeof ee?ee.toStringTag:"";var re=Y()?function(e){var t,r,n;if(null==e)return D.call(e);r=e[te],t=Q(e,te);try{e[te]=void 0}catch(t){return D.call(e)}return n=D.call(e),t?e[te]=r:delete e[te],n}:function(e){return D.call(e)},ne=Boolean,ie=Boolean.prototype.toString;var oe=Y();function ae(e){return"object"==typeof e&&(e instanceof ne||(oe?function(e){try{return ie.call(e),!0}catch(e){return!1}}(e):"[object Boolean]"===re(e)))}function se(e){return X(e)||ae(e)}function ue(){return new Function("return this;")()}U(se,"isPrimitive",X),U(se,"isObject",ae);var le="object"==typeof self?self:null,ce="object"==typeof window?window:null,de="object"==typeof global?global:null,fe="object"==typeof globalThis?globalThis:null;function pe(e){if(arguments.length){if(!X(e))throw new TypeError(I("invalid argument. Must provide a boolean. Value: `%s`.",e));if(e)return ue()}if(fe)return fe;if(le)return le;if(ce)return ce;if(de)return de;throw new Error("unexpected error. Unable to resolve global object.")}var he=pe(),ge=he.document&&he.document.childNodes,be=Int8Array;function me(){return/^\s*function\s*([^(]*)/i}var ye,we=/^\s*function\s*([^(]*)/i;U(me,"REGEXP",we),ye=Array.isArray?Array.isArray:function(e){return"[object Array]"===re(e)};var ve=ye;function je(e){return null!==e&&"object"==typeof e}var _e=function(e){if("function"!=typeof e)throw new TypeError(I("invalid argument. Must provide a function. Value: `%s`.",e));return function(t){var r,n;if(!ve(t))return!1;if(0===(r=t.length))return!1;for(n=0;n<r;n++)if(!1===e(t[n]))return!1;return!0}}(je);function Oe(e){return je(e)&&(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e))}function Me(e){var t,r,n;if(("Object"===(r=re(e).slice(8,-1))||"Error"===r)&&e.constructor){if("string"==typeof(n=e.constructor).name)return n.name;if(t=we.exec(n.toString()))return t[1]}return Oe(e)?"Buffer":r}U(je,"isObjectLikeArray",_e);var Ee="function"==typeof G||"object"==typeof be||"function"==typeof ge?function(e){return Me(e).toLowerCase()}:function(e){var t;return null===e?"null":"object"===(t=typeof e)?Me(e).toLowerCase():t};function Te(e){return"function"===Ee(e)}var Se=Te(Object.assign),ke=Object.assign;function Ve(e){return Object.keys(Object(e))}var xe,We=void 0!==Object.keys;function Ce(e){return"[object Arguments]"===re(e)}xe=function(){return Ce(arguments)}();var Ne=xe;function Ae(e){return"string"==typeof e}var Ie=String.prototype.valueOf;var ze=Y();function He(e){return"object"==typeof e&&(e instanceof String||(ze?function(e){try{return Ie.call(e),!0}catch(e){return!1}}(e):"[object String]"===re(e)))}function Je(e){return Ae(e)||He(e)}function Fe(e){return"number"==typeof e}U(Je,"isPrimitive",Ae),U(Je,"isObject",He);var Re=Number,Pe=Re.prototype.toString;var Be=Y();function Le(e){return"object"==typeof e&&(e instanceof Re||(Be?function(e){try{return Pe.call(e),!0}catch(e){return!1}}(e):"[object Number]"===re(e)))}function $e(e){return Fe(e)||Le(e)}function Ue(e){return e!=e}function qe(e){return Fe(e)&&Ue(e)}function Ge(e){return Le(e)&&Ue(e.valueOf())}function Xe(e){return qe(e)||Ge(e)}U($e,"isPrimitive",Fe),U($e,"isObject",Le),U(Xe,"isPrimitive",qe),U(Xe,"isObject",Ge);var Ze=Number.POSITIVE_INFINITY,Ye=Re.NEGATIVE_INFINITY,De=Math.floor;function Ke(e){return De(e)===e}function Qe(e){return e<Ze&&e>Ye&&Ke(e)}function et(e){return Fe(e)&&Qe(e)}function tt(e){return Le(e)&&Qe(e.valueOf())}function rt(e){return et(e)||tt(e)}U(rt,"isPrimitive",et),U(rt,"isObject",tt);var nt=Object.prototype.propertyIsEnumerable;var it=!nt.call("beep","0");function ot(e,t){var r;return null!=e&&(!(r=nt.call(e,t))&&it&&Je(e)?!qe(t=+t)&&et(t)&&t>=0&&t<e.length:r)}var at;at=Ne?Ce:function(e){return null!==e&&"object"==typeof e&&!ve(e)&&"number"==typeof e.length&&Ke(e.length)&&e.length>=0&&e.length<=4294967295&&Q(e,"callee")&&!ot(e,"callee")};var st=at,ut=Array.prototype.slice;var lt=ot((function(){}),"prototype"),ct=!ot({toString:null},"toString");function dt(e){return e!=e}function ft(e){return Fe(e)&&dt(e)}function pt(e){return Le(e)&&dt(e.valueOf())}function ht(e){return ft(e)||pt(e)}U(ht,"isPrimitive",ft),U(ht,"isObject",pt);function gt(e){return"object"==typeof e&&null!==e&&"number"==typeof e.length&&Ke(e.length)&&e.length>=0&&e.length<=9007199254740991}function bt(e,t,r){var n,i;if(!gt(e)&&!Ae(e))throw new TypeError(I("invalid argument. First argument must be an array-like object. Value: `%s`.",e));if(0===(n=e.length))return-1;if(3===arguments.length){if(!et(r))throw new TypeError(I("invalid argument. Third argument must be an integer. Value: `%s`.",r));if(r>=0){if(r>=n)return-1;i=r}else(i=n+r)<0&&(i=0)}else i=0;if(ht(t)){for(;i<n;i++)if(ht(e[i]))return i}else for(;i<n;i++)if(e[i]===t)return i;return-1}function mt(e){return e.constructor&&e.constructor.prototype===e}var yt=["console","external","frame","frameElement","frames","innerHeight","innerWidth","outerHeight","outerWidth","pageXOffset","pageYOffset","parent","scrollLeft","scrollTop","scrollX","scrollY","self","webkitIndexedDB","webkitStorageInfo","window"],wt="undefined"==typeof window?void 0:window;var vt=function(){var e;if("undefined"===Ee(wt))return!1;for(e in wt)try{-1===bt(yt,e)&&Q(wt,e)&&null!==wt[e]&&"object"===Ee(wt[e])&&mt(wt[e])}catch(e){return!0}return!1}(),jt="undefined"!=typeof window;var _t,Ot=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];_t=We?function(){return 2!==(Ve(arguments)||"").length}(1,2)?function(e){return st(e)?Ve(ut.call(e)):Ve(e)}:Ve:function(e){var t,r,n,i,o,a,s;if(i=[],st(e)){for(s=0;s<e.length;s++)i.push(s.toString());return i}if("string"==typeof e){if(e.length>0&&!Q(e,"0"))for(s=0;s<e.length;s++)i.push(s.toString())}else{if(!1==(n="function"==typeof e)&&!je(e))return i;r=lt&&n}for(o in e)r&&"prototype"===o||!Q(e,o)||i.push(String(o));if(ct)for(t=function(e){if(!1===jt&&!vt)return mt(e);try{return mt(e)}catch(e){return!1}}(e),s=0;s<Ot.length;s++)a=Ot[s],t&&"constructor"===a||!Q(e,a)||i.push(String(a));return i};var Mt,Et=_t,Tt=void 0!==Object.getOwnPropertySymbols,St=Object,kt=St.getOwnPropertySymbols;Mt=Tt?function(e){return kt(St(e))}:function(){return[]};var Vt,xt=Mt;function Wt(e){var t,r,n;for(t=Et(e),r=xt(e),n=0;n<r.length;n++)ot(e,r[n])&&t.push(r[n]);return t}Vt=Se?ke:function(e){var t,r,n,i,o,a,s;if(null==e)throw new TypeError(I("invalid argument. First argument must be a non-null object. Value: `%s`.",e));for(o=St(e),a=1;a<arguments.length;a++)if(null!=(t=arguments[a]))for(i=(r=Wt(St(t))).length,s=0;s<i;s++)o[n=r[s]]=t[n];return o};var Ct=Vt;function Nt(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t?new TypeError(I("invalid argument. A provided constructor must be either an object (except null) or a function. Value: `%s`.",e)):null}var At=Object.create;function It(){}var zt="function"==typeof At?At:function(e){return It.prototype=e,new It};function Ht(e,t){var r=Nt(e);if(r)throw r;if(r=Nt(t))throw r;if(void 0===t.prototype)throw new TypeError(I("invalid argument. Second argument must have a prototype from which another object can inherit. Value: `%s`.",t.prototype));return e.prototype=zt(t.prototype),L(e.prototype,"constructor",{configurable:!0,enumerable:!1,writable:!0,value:e}),e}function Jt(e,t,r){L(e,t,{configurable:!0,enumerable:!1,writable:!0,value:r})}var Ft=t;function Rt(e){var t,r;for(t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);function n(){e.apply(null,t)}Ft.nextTick(n)}var Pt={objectMode:!1,allowHalfOpen:!1,readableObjectMode:!1};var Bt,Lt=Object.getPrototypeOf;Bt=Te(Object.getPrototypeOf)?Lt:function(e){var t=function(e){return e.__proto__}(e);return t||null===t?t:"[object Function]"===re(e.constructor)?e.constructor.prototype:e instanceof Object?Object.prototype:null};var $t=Bt;function Ut(e){return null==e?null:(e=St(e),$t(e))}var qt=Object.prototype;function Gt(e){var t;return!!function(e){return"object"==typeof e&&null!==e&&!ve(e)}(e)&&(!(t=Ut(e))||!Q(e,"constructor")&&Q(t,"constructor")&&Te(t.constructor)&&"[object Function]"===re(t.constructor)&&Q(t,"isPrototypeOf")&&Te(t.isPrototypeOf)&&(t===qt||function(e){var t;for(t in e)if(!Q(e,t))return!1;return!0}(e)))}function Xt(e){return Fe(e)&&e>=0}function Zt(e){return Le(e)&&e.valueOf()>=0}function Yt(e){return Xt(e)||Zt(e)}function Dt(e,t){return Gt(t)?Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!X(e.readableObjectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","readableObjectMode",e.readableObjectMode)):Q(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!X(e.allowHalfOpen))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}U(Yt,"isPrimitive",Xt),U(Yt,"isObject",Zt);var Kt=q(Object.freeze({__proto__:null,default:()=>()=>{}})),Qt=Kt("inspect-stream"),er=e.Transform;function tr(e,t){var r,n,i;if(!(this instanceof tr))return arguments.length>1?new tr(e,t):new tr(e);if(n=Ct({},Pt),arguments.length>1){if(r=t,i=Dt(n,e))throw i}else r=e;if(!Te(r))throw new TypeError(I("invalid argument. Callback argument must be a function. Value: `%s`.",r));return n.writableObjectMode=!0,Qt("Creating a transform stream configured with the following options: %s.",JSON.stringify(n)),er.call(this,n),Jt(this,"_destroyed",!1),Jt(this,"_idx",-1),U(this,"_inspect",r),this}Ht(tr,er),U(tr.prototype,"_transform",(function(e,t,r){this._idx+=1,Qt("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),this._inspect.call(null,e,this._idx),this.push(e),r()})),U(tr.prototype,"_flush",(function(e){Qt("Flushing the stream..."),e()})),U(tr.prototype,"destroy",(function(e){var t;return this._destroyed?(Qt("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(Qt("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));Qt("Closing the stream..."),t.emit("close")})),this)})),U(tr,"objectMode",(function(e,t){var r,n;if(arguments.length>1){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));r=Ct({},e),n=t}else r={},n=e;return r.objectMode=!0,new tr(r,n)})),U(tr,"factory",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return r;function r(e){return new tr(t,e)}}));var rr="debug-stream",nr=Kt(rr),ir={objectMode:!1,allowHalfOpen:!1,readableObjectMode:!1,name:""};function or(e,t){return Gt(t)?Q(t,"name")&&(e.name=t.name,!Ae(e.name))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","name",e.name)):Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!X(e.readableObjectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","readableObjectMode",e.readableObjectMode)):Q(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!X(e.allowHalfOpen))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var ar=Kt;function sr(e,t){var r,n,i,o,a;if(!(this instanceof sr))return arguments.length>1?new sr(e,t):1===arguments.length?new sr(e):new sr;if(r=Ct({},ir),arguments.length>1){if(!Te(t))throw new TypeError(I("invalid argument. Callback argument must be a function. Value: `%s`.",t));a=t,o=or(r,e)}else arguments.length&&(Te(e)?a=e:o=or(r,e));if(o)throw o;return n=r.name?"debug-stream:"+r.name:rr,i=ar(n),nr("Creating a transform stream configured with the following options: %s.",JSON.stringify(r)),tr.call(this,r,s),this;function s(e,t){if(a)return nr("Received a new chunk. Chunk: %s. Index: %d.",e.toString(),t),a(i,e,t);Oe(e)&&(e=e.toString()),e=JSON.stringify(e),nr("Received a new chunk. Chunk: %s. Index: %d.",e,t),i("Chunk: %s. Index: %d.",e,t)}}Ht(sr,tr),U(sr,"objectMode",(function(e,t){var r,n;if(arguments.length>1){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));if(r=Ct({},e),n=t,!Te(t))throw new TypeError(I("invalid argument. Callback argument must be a function. Value: `%s`.",t))}else if(arguments.length)if(Te(e))r={},n=e;else{if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));r=Ct({},e)}else r={};return r.objectMode=!0,void 0===n?new sr(r):new sr(r,n)})),U(sr,"factory",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return r;function r(e,r){return t.name=e,arguments.length>1?new sr(t,r):new sr(t)}}));var ur={objectMode:!1,decodeStrings:!0,defaultEncoding:"utf8"};function lr(e,t){return Gt(t)?Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Q(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!X(e.decodeStrings))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","decodeStrings",e.decodeStrings)):Q(t,"defaultEncoding")&&(e.defaultEncoding=t.defaultEncoding,!Ae(e.defaultEncoding))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","defaultEncoding",e.defaultEncoding)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var cr=Kt("inspect-stream-sink"),dr=e.Writable;function fr(e,t){var r,n,i;if(!(this instanceof fr))return arguments.length>1?new fr(e,t):new fr(e);if(n=Ct({},ur),arguments.length>1){if(r=t,i=lr(n,e))throw i}else r=e;if(!Te(r))throw new TypeError(I("invalid argument. Callback argument must be a function. Value: `%s`.",r));return cr("Creating a writable stream configured with the following options: %s.",JSON.stringify(n)),dr.call(this,n),Jt(this,"_destroyed",!1),Jt(this,"_idx",-1),U(this,"_inspect",r),this}Ht(fr,dr),U(fr.prototype,"_write",(function(e,t,r){if(this._idx+=1,cr("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),this._inspect.call(null,e,this._idx),this._destroyed)return Rt(r);r()})),U(fr.prototype,"destroy",(function(e){var t;return this._destroyed?(cr("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(cr("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));cr("Closing the stream..."),t.emit("close")})),this)})),U(fr,"objectMode",(function(e,t){var r,n;if(arguments.length>1){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));r=Ct({},e),n=t}else r={},n=e;return r.objectMode=!0,new fr(r,n)})),U(fr,"factory",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return r;function r(e){return new fr(t,e)}}));var pr="debug-stream-sink",hr=Kt(pr),gr={objectMode:!1,decodeStrings:!0,defaultEncoding:"utf8",name:""};function br(e,t){return Gt(t)?Q(t,"name")&&(e.name=t.name,!Ae(e.name))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","name",e.name)):Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Q(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!X(e.decodeStrings))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","decodeStrings",e.decodeStrings)):Q(t,"defaultEncoding")&&(e.defaultEncoding=t.defaultEncoding,!Ae(e.defaultEncoding))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","defaultEncoding",e.defaultEncoding)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var mr=Kt;function yr(e,t){var r,n,i,o,a;if(!(this instanceof yr))return arguments.length>1?new yr(e,t):1===arguments.length?new yr(e):new yr;if(r=Ct({},gr),arguments.length>1){if(!Te(t))throw new TypeError(I("invalid argument. Callback argument must be a function. Value: `%s`.",t));a=t,o=br(r,e)}else arguments.length&&(Te(e)?a=e:o=br(r,e));if(o)throw o;return n=r.name?pr+":"+r.name:pr,i=mr(n),hr("Creating a writable stream configured with the following options: %s.",JSON.stringify(r)),fr.call(this,r,s),this;function s(e,t){if(a)return hr("Received a new chunk. Chunk: %s. Index: %d.",e.toString(),t),a(i,e,t);Oe(e)&&(e=e.toString()),e=JSON.stringify(e),hr("Received a new chunk. Chunk: %s. Index: %d.",e,t),i("Chunk: %s. Index: %d.",e,t)}}function wr(e){if("object"!=typeof e||null===e)return!1;if(e instanceof Error)return!0;for(;e;){if("[object Error]"===re(e))return!0;e=Ut(e)}return!1}Ht(yr,fr),U(yr,"objectMode",(function(e,t){var r,n;if(arguments.length>1){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));if(r=Ct({},e),n=t,!Te(t))throw new TypeError(I("invalid argument. Callback argument must be a function. Value: `%s`.",t))}else if(arguments.length)if(Te(e))r={},n=e;else{if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));r=Ct({},e)}else r={};return r.objectMode=!0,void 0===n?new yr(r):new yr(r,n)})),U(yr,"factory",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return r;function r(e,r){return t.name=e,arguments.length>1?new yr(t,r):new yr(t)}}));var vr={objectMode:!1};function jr(e,t){return Gt(t)?Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var _r=Kt("empty-stream"),Or=e.Readable;function Mr(e){var t,r;if(!(this instanceof Mr))return arguments.length>0?new Mr(e):new Mr;if(t=Ct({},vr),arguments.length>0&&(r=jr(t,e)))throw r;return _r("Creating a readable stream configured with the following options: %s.",JSON.stringify(t)),Or.call(this,t),Jt(this,"_destroyed",!1),this}Ht(Mr,Or),U(Mr.prototype,"_read",(function(){this.push(null)})),U(Mr.prototype,"destroy",(function(e){var t;return this._destroyed?(_r("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(_r("Stream was destroyed due to an error. Error: %s.",wr(e)?e.message:JSON.stringify(e)),t.emit("error",e));_r("Closing the stream..."),t.emit("close")})),this)})),U(Mr,"objectMode",(function(){return new Mr({objectMode:!0})})),U(Mr,"factory",(function(e){var t;return t=arguments.length>0?Ct({},e):{},r;function r(){return new Mr(t)}}));var Er="function"==typeof Buffer?Buffer:null;var Tr,Sr=r.Buffer;Tr=function(){var e,t;if("function"!=typeof Er)return!1;try{e=Oe(t="function"==typeof Er.from?Er.from([1,2,3,4]):new Er([1,2,3,4]))&&1===t[0]&&2===t[1]&&3===t[2]&&4===t[3]}catch(t){e=!1}return e}()?Sr:function(){throw new Error("not implemented")};var kr,Vr=Tr;kr=Te(Vr.from)?function(e,t){if(!Ae(e))throw new TypeError(I("invalid argument. First argument must be a string. Value: `%s`.",e));if(arguments.length>1){if(!Ae(t))throw new TypeError(I("invalid argument. Second argument must be a string. Value: `%s`.",t));return Vr.from(e,t)}return Vr.from(e,"utf8")}:function(e,t){if(!Ae(e))throw new TypeError(I("invalid argument. First argument must be a string. Value: `%s`.",e));if(arguments.length>1){if(!Ae(t))throw new TypeError(I("invalid argument. Second argument must be a string. Value: `%s`.",t));return new Vr(e,t)}return new Vr(e,"utf8")};var xr=kr,Wr={objectMode:!1,encoding:null,sep:"\n",dir:1};function Cr(e,t){return Gt(t)?Q(t,"sep")&&(e.sep=t.sep,!Ae(e.sep))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"encoding")&&(e.encoding=t.encoding,!Ae(e.encoding)&&null!==e.encoding)?new TypeError(I("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Q(t,"serialize")&&(e.serialize=t.serialize,!Te(e.serialize))?new TypeError(I("invalid option. `%s` option must be a function. Option: `%s`.","serialize",e.serialize)):Q(t,"dir")&&(e.dir=t.dir,1!==e.dir&&-1!==e.dir)?new TypeError(I("invalid option. `%s` option must be either `1` or `-1`. Option: `%s`.","dir",e.dir)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var Nr=Kt("from-array-stream"),Ar=e.Readable;function Ir(e,t){var r,n;if(!(this instanceof Ir))return arguments.length>1?new Ir(e,t):new Ir(e);if(!gt(e))throw new TypeError(I("invalid argument. First argument must be an array-like object. Value: `%s`.",e));if(r=Ct({},Wr),arguments.length>1&&(n=Cr(r,t)))throw n;return Nr("Creating a readable stream configured with the following options: %s.",JSON.stringify(r)),Ar.call(this,r),Jt(this,"_destroyed",!1),U(this,"_objectMode",r.objectMode),U(this,"_sep",r.sep),U(this,"_serialize",r.serialize||JSON.stringify),U(this,"_src",e),U(this,"_stride",r.dir),Jt(this,"_i",0),Jt(this,"_idx",1===r.dir?0:e.length-1),this}Ht(Ir,Ar),U(Ir.prototype,"_read",(function(){var e,t,r;if(!this._destroyed)for(e=!0;e;){if(t=null,this._i+=1,this._i>this._src.length)return Nr("Finished iteration."),this.push(null);r=this._src[this._idx],Nr("Value: %s. Idx: %d. Iter: %d.",JSON.stringify(r),this._idx,this._i),this._idx+=this._stride,!1===this._objectMode&&("string"==typeof(r=this._serialize(r))?r=1===this._i?xr(r):xr(this._sep+r):Oe(r)?this._i>1&&(r=Vr.concat([xr(this._sep),r])):t=new Error(I("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",r))),t?this.emit("error",t):e=this.push(r)}})),U(Ir.prototype,"destroy",(function(e){var t;return this._destroyed?(Nr("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(Nr("Stream was destroyed due to an error. Error: %s.",wr(e)?e.message:JSON.stringify(e)),t.emit("error",e));Nr("Closing the stream..."),t.emit("close")})),this)})),U(Ir,"objectMode",(function(e,t){var r;if(arguments.length>1){if(!Gt(r=t))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",r));r=Ct({},t)}else r={};return r.objectMode=!0,new Ir(e,r)})),U(Ir,"factory",(function(e){var t;return t=arguments.length?Ct({},e):{},r;function r(e){return new Ir(e,t)}}));var zr={objectMode:!1,encoding:null,sep:"\n",iter:1e308,dir:1};function Hr(e){return et(e)&&e>=0}function Jr(e){return tt(e)&&e.valueOf()>=0}function Fr(e){return Hr(e)||Jr(e)}function Rr(e,t){return Gt(t)?Q(t,"sep")&&(e.sep=t.sep,!Ae(e.sep))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"encoding")&&(e.encoding=t.encoding,!Ae(e.encoding)&&null!==e.encoding)?new TypeError(I("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Q(t,"serialize")&&(e.serialize=t.serialize,!Te(e.serialize))?new TypeError(I("invalid option. `%s` option must be a function. Option: `%s`.","serialize",e.serialize)):Q(t,"iter")&&(e.iter=t.iter,!Hr(e.iter))?new TypeError(I("invalid option. `%s` option must be a nonnegative integer. Option: `%s`.","iter",e.iter)):Q(t,"dir")&&(e.dir=t.dir,1!==e.dir&&-1!==e.dir)?new TypeError(I("invalid option. `%s` option must be either `1` or `-1`. Option: `%s`.","dir",e.dir)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}U(Fr,"isPrimitive",Hr),U(Fr,"isObject",Jr);var Pr=Kt("from-circular-array-stream"),Br=e.Readable;function Lr(e,t){var r,n;if(!(this instanceof Lr))return arguments.length>1?new Lr(e,t):new Lr(e);if(!gt(e))throw new TypeError(I("invalid argument. First argument must be an array-like object. Value: `%s`.",e));if(r=Ct({},zr),arguments.length>1&&(n=Rr(r,t)))throw n;return Pr("Creating a readable stream configured with the following options: %s.",JSON.stringify(r)),Br.call(this,r),Jt(this,"_destroyed",!1),U(this,"_objectMode",r.objectMode),U(this,"_sep",r.sep),U(this,"_serialize",r.serialize||JSON.stringify),U(this,"_src",e),U(this,"_stride",r.dir),U(this,"_iter",r.iter),Jt(this,"_i",0),Jt(this,"_idx",1===r.dir?-1:e.length),this}Ht(Lr,Br),U(Lr.prototype,"_read",(function(){var e,t,r;if(!this._destroyed)for(e=!0;e;){if(t=null,this._i+=1,this._i>this._iter||0===this._src.length)return Pr("Finished iteration."),this.push(null);this._idx+=this._stride,this._stride>0&&this._idx>=this._src.length?this._idx%=this._src.length:this._stride<0&&this._idx<0&&(this._idx+=this._src.length),r=this._src[this._idx],Pr("Value: %s. Idx: %d. Iter: %d.",JSON.stringify(r),this._idx,this._i),!1===this._objectMode&&("string"==typeof(r=this._serialize(r))?r=1===this._i?xr(r):xr(this._sep+r):Oe(r)?this._i>1&&(r=Vr.concat([xr(this._sep),r])):t=new Error(I("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",r))),t?this.emit("error",t):e=this.push(r)}})),U(Lr.prototype,"destroy",(function(e){var t;return this._destroyed?(Pr("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(Pr("Stream was destroyed due to an error. Error: %s.",wr(e)?e.message:JSON.stringify(e)),t.emit("error",e));Pr("Closing the stream..."),t.emit("close")})),this)})),U(Lr,"objectMode",(function(e,t){var r;if(arguments.length>1){if(!Gt(r=t))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",r));r=Ct({},t)}else r={};return r.objectMode=!0,new Lr(e,r)})),U(Lr,"factory",(function(e){var t;return t=arguments.length?Ct({},e):{},r;function r(e){return new Lr(e,t)}}));var $r="function"==typeof Uint8Array;function Ur(e){return $r&&e instanceof Uint8Array||"[object Uint8Array]"===re(e)}var qr=Object.prototype.toString;var Gr=new Function("try {return this === global;} catch ( err ) {return false;}")(),Xr=t,Zr=pe(),Yr=/node|io\.js/;var Dr,Kr,Qr="object"==typeof global&&global===Zr&&Zr===Zr.global&&("[object global]"===re(Zr)||"[object Object]"===re(Zr))&&!0===Gr&&"object"==typeof Xr&&"[object process]"===(Dr=Xr,qr.call(Dr))&&Gt(Xr.versions)&&Ae(Xr.versions.node)&&(void 0===Xr.release||Gt(Xr.release)&&Ae(Xr.release.name)&&Yr.test(Xr.release.name)),en=t.versions.node,tn=(Kr=Qr?en:null,Kr?parseInt(Kr.split(".")[0],10):-1),rn=Te(Vr.from)&&tn>=5,nn="function"==typeof ArrayBuffer;function on(e){return nn&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===re(e)}var an="function"==typeof Uint8Array?Uint8Array:null;var sn,un="function"==typeof Uint8Array?Uint8Array:void 0;sn=function(){var e,t;if("function"!=typeof an)return!1;try{e=Ur(t=new an(t=[1,3.14,-3.14,256,257]))&&1===t[0]&&3===t[1]&&253===t[2]&&0===t[3]&&1===t[4]}catch(t){e=!1}return e}()?un:function(){throw new Error("not implemented")};var ln=sn;var cn,dn=Te(Vr.from)?function(e){if(!gt(e))throw new TypeError(I("invalid argument. Must provide an array-like object. Value: `%s`.",e));return Vr.from(e)}:function(e){if(!gt(e))throw new TypeError(I("invalid argument. Must provide an array-like object. Value: `%s`.",e));return new Vr(e)};cn=rn?function(e,t,r){var n,i;if(!on(e))throw new TypeError(I("invalid argument. First argument must be an ArrayBuffer. Value: `%s`.",e));if(arguments.length>1){if(!Hr(t))throw new TypeError(I("invalid argument. Second argument must be a nonnegative integer. Value: `%s`.",t));if(t>e.byteLength)throw new RangeError(I("invalid argument. Second argument must not exceed the number of bytes in the input ArrayBuffer. Value: `%s`.",t));if(n=t,arguments.length>2){if(!Hr(r))throw new TypeError(I("invalid argument. Last argument must be a nonnegative integer. Value: `%s`.",r));if(r>e.byteLength)throw new RangeError(I("invalid argument. Last argument must not exceed the number of bytes in the input ArrayBuffer. Value: `%s`.",r));i=r}else i=e.byteLength-n}else n=0,i=e.byteLength;return 0===i&&tn<6?Vr.from([]):Vr.from(e,n,i)}:function(e,t,r){var n;if(!on(e))throw new TypeError(I("invalid argument. First argument must be an ArrayBuffer. Value: `%s`.",e));if(arguments.length>1){if(!Hr(t))throw new TypeError(I("invalid argument. Second argument must be a nonnegative integer. Value: `%s`.",t));if(t>e.byteLength)throw new RangeError(I("invalid argument. Second argument must not exceed the number of bytes in the input ArrayBuffer. Value: `%s`.",t));if(arguments.length>2){if(!Hr(r))throw new TypeError(I("invalid argument. Last argument must be a nonnegative integer. Value: `%s`.",r));if(r>e.byteLength)throw new RangeError(I("invalid argument. Last argument must not exceed the number of bytes in the input ArrayBuffer. Value: `%s`.",r));n=r}else n=e.byteLength-t;return dn(new ln(e,t,n))}return tn<3?dn(new ln(e)):0===e.byteLength?new Vr([]):new Vr(e)};var fn=cn,pn={objectMode:!1,encoding:null,sep:"\n",iter:1e308};function hn(e,t){return Gt(t)?Q(t,"sep")&&(e.sep=t.sep,!Ae(e.sep))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"encoding")&&(e.encoding=t.encoding,!Ae(e.encoding)&&null!==e.encoding)?new TypeError(I("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Q(t,"iter")&&(e.iter=t.iter,!Hr(e.iter))?new TypeError(I("invalid option. `%s` option must be a nonnegative integer. Option: `%s`.","iter",e.iter)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var gn=Kt("from-constant-stream"),bn=e.Readable;function mn(e,t){var r,n;if(!(this instanceof mn))return arguments.length>1?new mn(e,t):new mn(e);if(r=Ct({},pn),arguments.length>1&&(n=hn(r,t)))throw n;if(!1===r.objectMode)if(Ae(e))e=xr(e);else if(Oe(e));else{if(!Ur(e))throw new TypeError(I("invalid argument. In binary mode, a provided value must be a string, Buffer, or Uint8Array. Value: `%s`.",e));e=fn(e.buffer,e.byteOffset,e.length)}return gn("Creating a readable stream configured with the following options: %s.",JSON.stringify(r)),bn.call(this,r),Jt(this,"_destroyed",!1),U(this,"_objectMode",r.objectMode),U(this,"_sep",xr(r.sep)),U(this,"_iter",r.iter),U(this,"_value",e),Jt(this,"_i",0),this}function yn(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)&&Te(e.next)}Ht(mn,bn),U(mn.prototype,"_read",(function(){var e;if(!this._destroyed)for(e=!0;e;){if(this._i+=1,this._i>this._iter)return gn("Finished iteration."),this.push(null);gn("Value: %s. Iter: %d.",this._value,this._i),e=!1===this._objectMode&&this._i>1?this.push(Vr.concat([this._sep,this._value])):this.push(this._value)}})),U(mn.prototype,"destroy",(function(e){var t;return this._destroyed?(gn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(gn("Stream was destroyed due to an error. Error: %s.",wr(e)?e.message:JSON.stringify(e)),t.emit("error",e));gn("Closing the stream..."),t.emit("close")})),this)})),U(mn,"objectMode",(function(e,t){var r;if(arguments.length>1){if(!Gt(r=t))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",r));r=Ct({},t)}else r={};return r.objectMode=!0,new mn(e,r)})),U(mn,"factory",(function(e,t){var r,n,i;return 0===(r=arguments.length)?(n={},i=!0):1===r?null!==e&&"object"==typeof e&&(Q(e,"sep")||Q(e,"iter")||Q(e,"objectMode")||Q(e,"encoding")||Q(e,"highWaterMark"))?(n=Ct({},e),i=!0):n={}:n=Ct({},t),i?o:a;function o(e){return new mn(e,n)}function a(){return new mn(e,n)}}));var wn={objectMode:!1,encoding:null,sep:"\n"};function vn(e,t){return Gt(t)?Q(t,"sep")&&(e.sep=t.sep,!Ae(e.sep))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"encoding")&&(e.encoding=t.encoding,!Ae(e.encoding)&&null!==e.encoding)?new TypeError(I("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Q(t,"serialize")&&(e.serialize=t.serialize,!Te(e.serialize))?new TypeError(I("invalid option. `%s` option must be a function. Option: `%s`.","serialize",e.serialize)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var jn=Kt("from-iterator-stream"),_n=e.Readable;function On(e,t){var r,n;if(!(this instanceof On))return arguments.length>1?new On(e,t):new On(e);if(!yn(e))throw new TypeError(I("invalid argument. First argument must be an iterator. Value: `%s`.",e));if(r=Ct({},wn),arguments.length>1&&(n=vn(r,t)))throw n;return jn("Creating a readable stream configured with the following options: %s.",JSON.stringify(r)),_n.call(this,r),Jt(this,"_destroyed",!1),U(this,"_objectMode",r.objectMode),U(this,"_sep",r.sep),U(this,"_serialize",r.serialize||JSON.stringify),U(this,"_iterator",e),Jt(this,"_i",0),this}Ht(On,_n),U(On.prototype,"_read",(function(){var e,t,r;if(!this._destroyed)for(e=!0;e;){if(r=this._iterator.next(),this._i+=1,r.done)return Q(r,"value")&&(r=r.value,jn("Value: %s. Iter: %d.",JSON.stringify(r),this._i),!1===this._objectMode&&("string"==typeof(r=this._serialize(r))?(r=1===this._i?xr(r):xr(this._sep+r),this.push(r)):Oe(r)?(this._i>1&&(r=Vr.concat([xr(this._sep),r])),this.push(r)):(t=new Error(I("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",r)),this.emit("error",t)))),jn("Finished iteration."),this.push(null);if(r=r.value,jn("Value: %s. Iter: %d.",JSON.stringify(r),this._i),!1===this._objectMode)if("string"==typeof(r=this._serialize(r)))r=1===this._i?xr(r):xr(this._sep+r);else{if(!Oe(r)){t=new Error(I("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",r)),this.emit("error",t);continue}this._i>1&&(r=Vr.concat([xr(this._sep),r]))}e=this.push(r)}})),U(On.prototype,"destroy",(function(e){var t;return this._destroyed?(jn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(jn("Stream was destroyed due to an error. Error: %s.",wr(e)?e.message:JSON.stringify(e)),t.emit("error",e));jn("Closing the stream..."),t.emit("close")})),this)})),U(On,"objectMode",(function(e,t){var r;if(arguments.length>1){if(!Gt(r=t))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",r));r=Ct({},t)}else r={};return r.objectMode=!0,new On(e,r)})),U(On,"factory",(function(e){var t;return t=arguments.length?Ct({},e):{},r;function r(e){return new On(e,t)}}));var Mn={objectMode:!1,encoding:null,sep:"\n"};function En(e,t){return Gt(t)?Q(t,"sep")&&(e.sep=t.sep,!Ae(e.sep))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"encoding")&&(e.encoding=t.encoding,!Ae(e.encoding)&&null!==e.encoding)?new TypeError(I("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Q(t,"serialize")&&(e.serialize=t.serialize,!Te(e.serialize))?new TypeError(I("invalid option. `%s` option must be a function. Option: `%s`.","serialize",e.serialize)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var Tn=Kt("from-strided-array-stream"),Sn=e.Readable;function kn(e,t,r,n,i){var o,a,s;if(!(this instanceof kn))return arguments.length>4?new kn(e,t,r,n,i):new kn(e,t,r,n);if(!Hr(e))throw new TypeError(I("invalid argument. First argument must be a nonnegative integer. Value: `%s`.",e));if(!gt(t))throw new TypeError(I("invalid argument. Second argument must be an array-like object. Value: `%s`.",t));if(!et(r))throw new TypeError(I("invalid argument. Third argument must be an integer. Value: `%s`.",r));if(!Hr(n))throw new TypeError(I("invalid argument. Fourth argument must be a nonnegative integer. Value: `%s`.",n));if(e>0&&(s=n+(e-1)*r,n>=t.length||s<0||s>=t.length))throw new RangeError("invalid arguments. Strided array parameters are incompatible with the provided array-like object. Linear index exceeds array bounds.");if(o=Ct({},Mn),arguments.length>4&&(a=En(o,i)))throw a;return Tn("Creating a readable stream configured with the following options: %s.",JSON.stringify(o)),Sn.call(this,o),Jt(this,"_destroyed",!1),U(this,"_objectMode",o.objectMode),U(this,"_sep",o.sep),U(this,"_serialize",o.serialize||JSON.stringify),U(this,"_buffer",t),U(this,"_N",e),U(this,"_stride",r),U(this,"_offset",n),Jt(this,"_idx",n),Jt(this,"_i",0),this}function Vn(e,t){return Gt(t)?Q(t,"sep")&&(e.sep=t.sep,!Ae(e.sep))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!X(e.readableObjectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","readableObjectMode",e.readableObjectMode)):Q(t,"encoding")&&(e.encoding=t.encoding,!Ae(e.encoding))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","encoding",e.encoding)):Q(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!X(e.allowHalfOpen))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}Ht(kn,Sn),U(kn.prototype,"_read",(function(){var e,t,r;if(!this._destroyed)for(e=!0;e;){if(t=null,this._i+=1,this._i>this._N)return Tn("Finished iteration."),this.push(null);r=this._buffer[this._idx],Tn("Value: %s. Idx: %d. Iter: %d.",JSON.stringify(r),this._idx,this._i),this._idx+=this._stride,!1===this._objectMode&&("string"==typeof(r=this._serialize(r))?r=1===this._i?xr(r):xr(this._sep+r):Oe(r)?this._i>1&&(r=Vr.concat([xr(this._sep),r])):t=new Error(I("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",r))),t?this.emit("error",t):e=this.push(r)}})),U(kn.prototype,"destroy",(function(e){var t;return this._destroyed?(Tn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(Tn("Stream was destroyed due to an error. Error: %s.",wr(e)?e.message:JSON.stringify(e)),t.emit("error",e));Tn("Closing the stream..."),t.emit("close")})),this)})),U(kn,"objectMode",(function(e,t,r,n,i){var o;if(arguments.length>4){if(!Gt(o=i))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",o));o=Ct({},i)}else o={};return o.objectMode=!0,new kn(e,t,r,n,o)})),U(kn,"factory",(function(e){var t;return t=arguments.length?Ct({},e):{},r;function r(e,r,n,i){return new kn(e,r,n,i,t)}}));var xn=Kt("join-stream"),Wn=e.Transform;function Cn(e){var t,r;if(!(this instanceof Cn))return arguments.length?new Cn(e):new Cn;if(t={objectMode:!1,encoding:null,allowHalfOpen:!1,readableObjectMode:!1,sep:"\n"},arguments.length&&(r=Vn(t,e)))throw r;return t.writableObjectMode=!0,t.decodeStrings=!1,xn("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),Wn.call(this,t),Jt(this,"_destroyed",!1),U(this,"_encoding",null===t.encoding?"utf8":t.encoding),"utf8"!==this._encoding&&(t.sep=xr(t.sep,this._encoding)),U(this,"_sep",t.sep),Jt(this,"_init",!1),Jt(this,"_idx",-1),this}Ht(Cn,Wn),U(Cn.prototype,"_transform",(function(e,t,r){var n;this._idx+=1,xn("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),"utf8"===this._encoding?this._init?e=this._sep+e:this._init=!0:this._init?(e=new Vr(e,t),n=this._sep.length+e.length,e=(e=Vr.concat([this._sep,e],n)).toString(this._encoding)):this._init=!0,this.push(e,this._encoding),r()})),U(Cn.prototype,"_flush",(function(e){xn("Flushing the stream..."),e()})),U(Cn.prototype,"destroy",(function(e){var t;return this._destroyed?(xn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(xn("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));xn("Closing the stream..."),t.emit("close")})),this)})),U(Cn,"objectMode",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return t.objectMode=!0,new Cn(t)})),U(Cn,"factory",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return r;function r(){return new Cn(t)}}));var Nn={objectMode:!1,encoding:null,allowHalfOpen:!1,writableObjectMode:!1,sep:null},An=RegExp.prototype.exec;var In=Y();function zn(e){return"object"==typeof e&&(e instanceof RegExp||(In?function(e){try{return An.call(e),!0}catch(e){return!1}}(e):"[object RegExp]"===re(e)))}function Hn(e,t){return Gt(t)?!Q(t,"sep")||(e.sep=t.sep,Ae(e.sep)||zn(e.sep))?Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"writableObjectMode")&&(e.writableObjectMode=t.writableObjectMode,!X(e.writableObjectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","writableObjectMode",e.writableObjectMode)):Q(t,"encoding")&&(e.encoding=t.encoding,!Ae(e.encoding))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","encoding",e.encoding)):Q(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!X(e.allowHalfOpen))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(I("invalid option. `%s` option must be either a string or a regular expression. Option: `%s`.","sep",e.sep)):new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var Jn=Kt("split-stream");function Fn(e,t){return"utf8"===t||"buffer"===t?e:(e=xr(e),t?e.toString(t):e.toString())}var Rn=e.Transform,Pn=/\r?\n/;function Bn(e){var t,r;if(!(this instanceof Bn))return arguments.length?new Bn(e):new Bn;if(t=Ct({},Nn),arguments.length&&(r=Hn(t,e)))throw r;return t.readableObjectMode=!0,t.decodeStrings=!1,Jn("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),Rn.call(this,t),U(this,"_sep",null===t.sep?Pn:t.sep),Jt(this,"_destroyed",!1),U(this,"_encoding",t.encoding),Jt(this,"_buffer",""),Jt(this,"_idx",-1),this}Ht(Bn,Rn),U(Bn.prototype,"_transform",(function(e,t,r){var n,i,o,a;if(this._idx+=1,Jn("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),"buffer"===t?e=e.toString():"utf8"!==t&&(e=(e=new Vr(e,t)).toString("utf8")),n=e.split(this._sep),Jn("Splits: %s. Index: %d.",JSON.stringify(n),this._idx),o=n.length-1,Jn("%s splits. Index: %d.",o,this._idx),0===o)Jn("No splits. Index: %d.",this._idx),this._buffer+=n[o];else{for(Jn("Processing splits. Index: %d.",this._index),i=Fn(i=this._buffer+n[0],t),Jn("Split %d: %s. Index: %d.",0,i.toString(),this._idx),this.push(i,t),a=1;a<o;a++)i=Fn(n[a],t),Jn("Split %d: %s. Index: %d.",a,i.toString(),this._idx),this.push(i,t);Jn("Remaining split: %s.",n[o].toString()),this._buffer=n[o]}r()})),U(Bn.prototype,"_flush",(function(e){var t=this._buffer;t&&(Jn("Processing final split..."),t=Fn(t,this._encoding),this.push(t,this._encoding)),Jn("Flushing the stream..."),e()})),U(Bn.prototype,"destroy",(function(e){var t;return this._destroyed?(Jn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(Jn("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));Jn("Closing the stream..."),t.emit("close")})),this)})),U(Bn,"objectMode",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return t.objectMode=!0,new Bn(t)})),U(Bn,"factory",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return r;function r(){return new Bn(t)}}));var Ln=t.stderr,$n=t.stdin,Un=t.stdout,qn={objectMode:!1,encoding:null,allowHalfOpen:!1,decodeStrings:!0};function Gn(e,t){return Gt(t)?Q(t,"transform")&&(e.transform=t.transform,!Te(e.transform))?new TypeError(I("invalid option. `%s` option must be a function. Option: `%s`.","transform",e.transform)):Q(t,"flush")&&(e.flush=t.flush,!Te(e.flush))?new TypeError(I("invalid option. `%s` option must be a function. Option: `%s`.","flush",e.flush)):Q(t,"objectMode")&&(e.objectMode=t.objectMode,!X(e.objectMode))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Q(t,"encoding")&&(e.encoding=t.encoding,!Ae(e.encoding))?new TypeError(I("invalid option. `%s` option must be a string. Option: `%s`.","encoding",e.encoding)):Q(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!X(e.allowHalfOpen))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):Q(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Xt(e.highWaterMark))?new TypeError(I("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Q(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!X(e.decodeStrings))?new TypeError(I("invalid option. `%s` option must be a boolean. Option: `%s`.","decodeStrings",e.decodeStrings)):null:new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",t))}var Xn=Kt("transform-stream:destroy");function Zn(e){var t;return this._destroyed?(Xn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Rt((function(){e&&(Xn("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));Xn("Closing the stream..."),t.emit("close")})),this)}var Yn=Kt("transform-stream:transform");function Dn(e,t,r){Yn("Received a new chunk. Chunk: %s. Encoding: %s.",e.toString(),t),r(null,e)}var Kn=Kt,Qn=e.Transform,ei=Kn("transform-stream:main");function ti(e){var t,r;if(!(this instanceof ti))return arguments.length?new ti(e):new ti;if(t=Ct({},qn),arguments.length&&(r=Gn(t,e)))throw r;return ei("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),Qn.call(this,t),this._destroyed=!1,t.transform?this._transform=t.transform:this._transform=Dn,t.flush&&(this._flush=t.flush),this}Ht(ti,Qn),ti.prototype.destroy=Zn;var ri=Kt,ni=e.Transform,ii=ri("transform-stream:ctor");U(ti,"objectMode",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return t.objectMode=!0,new ti(t)})),U(ti,"factory",(function(e){var t;if(arguments.length){if(!Gt(e))throw new TypeError(I("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ct({},e)}else t={};return r;function r(e,r){return t.transform=e,arguments.length>1?t.flush=r:delete t.flush,new ti(t)}})),U(ti,"ctor",(function(e){var t,r,n;if(r=Ct({},qn),arguments.length&&(n=Gn(r,e)))throw n;function i(e){var t,n;if(!(this instanceof i))return arguments.length?new i(e):new i;if(t=Ct({},r),arguments.length&&(n=Gn(t,e)))throw n;return ii("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),ni.call(this,t),this._destroyed=!1,this}return t=r.transform?r.transform:Dn,Ht(i,ni),i.prototype._transform=t,r.flush&&(i.prototype._flush=r.flush),i.prototype.destroy=Zn,i}));var oi={};return $(oi,"debugStream",sr),$(oi,"debugSinkStream",yr),$(oi,"emptyStream",Mr),$(oi,"arrayStream",Ir),$(oi,"circularArrayStream",Lr),$(oi,"constantStream",mn),$(oi,"iteratorStream",On),$(oi,"stridedArrayStream",kn),$(oi,"inspectStream",tr),$(oi,"inspectSinkStream",fr),$(oi,"joinStream",Cn),$(oi,"splitStream",Bn),$(oi,"stderr",Ln),$(oi,"stdin",$n),$(oi,"stdout",Un),$(oi,"transformStream",ti),oi}));
//# sourceMappingURL=index.js.map
